(()=>{var e={5939:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(5530),a=r(7848),s=r(601),u=r(8450),c=r(7133),l=function(e){self.postMessage(e)};self.addEventListener("message",(function(e){var t=e.data;return n(void 0,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return"object"!=typeof t||"loadFile"!==(null==t?void 0:t.type)?[3,2]:[4,(r=t.file,n(void 0,void 0,void 0,(function(){var e,t,f,d,h;return i(this,(function(p){switch(p.label){case 0:return p.trys.push([0,3,,4]),[4,(0,s.createFileStream)(r)];case 1:return e=p.sent(),t=function(e){return n(void 0,void 0,void 0,(function(){return i(this,(function(t){return l({type:"onProgress",info:e}),[2]}))}))},f=(0,c.delayInterrupter)(100,0,t),[4,(0,a.loadImageByName)(e,{target:o.PixelFormat.canvas,progress:f})];case 2:if(!((d=p.sent())instanceof u.SurfaceStd))throw Error("Uncompatible surface type");return l({type:"onImageLoad",image:d.toParcel()}),[3,4];case 3:return h=p.sent(),l({type:"onError",error:h}),[3,4];case 4:return[2]}}))})))];case 1:e.sent(),e.label=2;case 2:return[2]}var r}))}))}))},9858:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1418:function(e,t){"use strict";var r=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},n=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.createProgressTracker=void 0,t.createProgressTracker=function(e,t,i){return function(o,a,s){return r(void 0,void 0,void 0,(function(){return n(this,(function(r){switch(r.label){case 0:return e?[4,e({step:t,maxValue:i,value:o,y:a,init:s})]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))}}},4439:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.allConverters=void 0;var n=r(6414),i=r(4193),o=r(7146),a=r(4366),s=r(5208),u=r(3866),c=r(1968),l=r(2397),f=r(6460),d=r(6585),h=r(6828),p=r(1447),b=r(1007),v=r(5432),y=r(4845),w=r(2767);t.allConverters=[(0,n.factoryRowOp)("B5G5R5","B8G8R8",d.rgb15to24Quality,{speed:90},"quality"),(0,n.factoryRowOp)("B5G5R5","B8G8R8",d.rgb15to24Fast,{quality:90},"fast"),(0,n.factoryDithering)("B8G8R8","B5G5R5",h.rgb24to15Dither,{speed:60,quality:90},"dither"),(0,n.factoryRowOp)("B8G8R8","B5G5R5",h.rgb24to15Fast,{speed:90,quality:70},"fast"),(0,n.factoryRowOp)("B8G8R8","R8G8B8",w.swapRedBlue24),(0,n.factoryRowOp)("R8G8B8","B8G8R8",w.swapRedBlue24),(0,n.factoryRowOp)("B8G8R8","B8G8R8A8",b.rgb24toRgba32),(0,n.factoryRowOp)("R8G8B8","R8G8B8A8",b.rgb24toRgba32),(0,n.factoryRowOp)("B8G8R8","R8G8B8A8",b.rgb24toRgba32AndSwapRB),(0,n.factoryRowOp)("R8G8B8","B8G8R8A8",b.rgb24toRgba32AndSwapRB),(0,n.factoryRowOp)("B8G8R8A8","R8G8B8A8",w.swapRedBlue32),(0,n.factoryRowOp)("R8G8B8A8","B8G8R8A8",w.swapRedBlue32),(0,n.factoryRowOp)("R16G16B16","R8G8B8",v.rgb48to24Fast,{loss:!0,quality:90},"fast"),(0,n.factoryRowOp)("B16G16R16","B8G8R8",v.rgb48to24Fast,{loss:!0,quality:90},"fast"),(0,n.factoryRowOp)("R16G16B16A16","R8G8B8A8",y.rgb64to32Fast,{loss:!0,quality:90},"fast"),(0,n.factoryRowOp)("B16G16R16A16","B8G8R8A8",y.rgb64to32Fast,{loss:!0,quality:90},"fast"),(0,n.factoryRowOp)("R8G8B8","G8",p.rgb24toG8,{loss:!0,speed:90,quality:90}),(0,n.factoryRowOp)("B8G8R8","G8",p.bgr24toG8,{loss:!0,speed:90,quality:90}),(0,n.factoryQuant2)({speed:50,quality:60,dithering:!0},"dither"),(0,n.factoryQuant2)({speed:55,quality:40,dithering:!1},"no dither"),(0,n.factoryRowOp)("G1","G8",o.gray1toGray8),(0,n.factoryRowOp)("G1","B8G8R8",a.gray1toRgb24),(0,n.factoryRowOp)("G1","R8G8B8",a.gray1toRgb24),(0,n.factoryRowOp)("G1","B8G8R8A8",a.gray1toRgba32),(0,n.factoryRowOp)("G1","R8G8B8A8",a.gray1toRgba32),(0,n.factoryDithering)("G8","G1",s.gray8toGray1Dither,{speed:80,quality:70},"dither"),(0,n.factoryRowOp)("G8","G1",s.gray8toGray1Fast,{quality:1,loss:!0},"fast"),(0,n.factoryRowOp)("G8","B8G8R8",u.gray8toRgb8),(0,n.factoryRowOp)("G8","R8G8B8",u.gray8toRgb8),(0,n.factoryRowOp)("G8","B8G8R8A8",u.gray8toRgba8),(0,n.factoryRowOp)("G8","R8G8B8A8",u.gray8toRgba8),(0,n.factoryRowOp)("G8A8","R8G8B8A8",u.grayAlpha8toRgba8),(0,n.factoryRowOp)("G8A8","B8G8R8A8",u.grayAlpha8toRgba8),(0,n.factoryRowOp)("G16","G8",i.gray16toGray8,{loss:!0}),(0,n.factoryRowOp)("G16A16","G8A8",i.grayAlpha16toGrayAlpha8,{loss:!0}),(0,n.factoryPalette)("I8","B8G8R8",c.indexed8toRgb24,c.makePaletteCacheBgra),(0,n.factoryPalette)("I8","R8G8B8",c.indexed8toRgb24,c.makePaletteCacheRgba),(0,n.factoryPalette)("I8","B8G8R8A8",c.indexed8toRgb32,c.makePaletteCacheBgra),(0,n.factoryPalette)("I8","R8G8B8A8",c.indexed8toRgb32,c.makePaletteCacheRgba),(0,n.factoryPalette)("J8","B8G8R8A8",c.indexed8toRgb32,c.makePaletteCacheBgra),(0,n.factoryPalette)("J8","R8G8B8A8",c.indexed8toRgb32,c.makePaletteCacheBgra),(0,n.factoryIndexedUp)("I1","I8",f.indexed1toIndexed8),(0,n.factoryIndexedUp)("I4","I8",f.indexed4toIndexed8),(0,n.factoryIndexedDown)("I8","I4",l.pack8to4bits,{dithering:!0,quality:80,speed:60}),(0,n.factoryIndexedDown)("I8","I4",l.pack8to4bits,{dithering:!1,quality:60,speed:70}),(0,n.factoryIndexedDown)("I8","I1",l.pack8to1bit,{dithering:!0,quality:80,speed:60})]},8512:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeDstInfoStd=void 0;var n=r(5530);t.makeDstInfoStd=function(e,t){var r,i=t.dstSign,o=t.makeDstInfo;return null!==(r=null==o?void 0:o(e,i))&&void 0!==r?r:{size:e.size,fmt:new n.PixelFormat(i)}}},8175:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.paletteReduceConverter=void 0;var o=r(447),a=r(8643),s=r(5530),u=r(7716);t.paletteReduceConverter=function(e){var t=e.nextConverter,r=e.size,c=e.progress,l=e.rowOp,f=r.x;return{progress:c,getRowsReader:function(){return n(void 0,void 0,void 0,(function(){var r,c,d,h,p;return i(this,(function(b){switch(b.label){case 0:return r=(0,a.createFreePalette)(16),[4,t.getSurface({palette:r})];case 1:if(c=b.sent(),!(d=c.palette))throw new o.ErrorRI("paletteReduceConverter expected a palette");if(d.length>16)throw new o.ErrorRI("Expected 16-colors palette, but got <n>",{n:d.length});return(h={size:e.size,fmt:new s.PixelFormat(e.dstSign)}).fmt.setPalette(d),p=new Uint8Array((0,u.getImageLineSize)(h)),[2,{dstInfo:h,readRow:function(e){return n(void 0,void 0,void 0,(function(){return i(this,(function(t){return l(f,c.getRowBuffer(e),p),[2,p]}))}))},finish:function(){return n(void 0,void 0,void 0,(function(){return i(this,(function(e){return[2]}))}))}}]}}))}))},getSurface:function(){return n(void 0,void 0,void 0,(function(){return i(this,(function(e){throw new o.ErrorRI("paletteReduceConverter.getSurface not implemented")}))}))},getRowsWriter:function(){return n(void 0,void 0,void 0,(function(){return i(this,(function(e){return[2,{getBuffer:function(){return n(void 0,void 0,void 0,(function(){return i(this,(function(e){return[2,new Uint8Array]}))}))},flushBuffer:function(){return n(void 0,void 0,void 0,(function(){return i(this,(function(e){return[2]}))}))},finish:function(){return n(void 0,void 0,void 0,(function(){return i(this,(function(e){return[2]}))}))}}]}))}))}}}},4621:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.quant2Converter=void 0;var o=r(7291),a=r(1160),s=r(447),u=r(8450),c=r(7716),l=r(5530);t.quant2Converter=function(e){var t=e.nextConverter,r=e.size,f=e.dstSign,d=e.dithering,h=e.progress,p=function(e,t){if(d){var r=(0,a.createFloydSteinberg8)(t,3);return function(n,i){return e.cvtDither(t,n.buffer,n.byteOffset,i.buffer,i.byteOffset,r)}}return function(r,n){return e.cvt(t,r.buffer,r.byteOffset,n.buffer,n.byteOffset)}};return{progress:h,getRowsWriter:function(e){return n(void 0,void 0,void 0,(function(){var r,a,l,f,d;return i(this,(function(h){if("B8G8R8"!==e.fmt.signature)throw new s.ErrorRI("Expected B8G8R8 for Quant2 writer");return r=new o.Histogram,a=new u.SurfaceStd(e),l=a.width,f=a.height,d=p(r,l),[2,{getBuffer:function(e){return n(void 0,void 0,void 0,(function(){return i(this,(function(t){return[2,a.getRowBuffer(e)]}))}))},flushBuffer:function(e){return n(void 0,void 0,void 0,(function(){return i(this,(function(t){return r.addRowBGR(l,a.getRowBuffer(e)),[2]}))}))},finish:function(){return n(void 0,void 0,void 0,(function(){var e,n,o,s,u,h;return i(this,(function(i){switch(i.label){case 0:return(e=t.desiredPalette)?r.makePalette(e):r.makePaletteN(),n=(0,c.createInfo)(l,f,8,"Indexed",!1,r.pal),[4,t.getRowsWriter(n)];case 1:o=i.sent(),s=0,i.label=2;case 2:return s<f?[4,o.getBuffer(s)]:[3,6];case 3:return u=i.sent(),h=a.getRowBuffer(s),d(h,u),[4,o.flushBuffer(s)];case 4:i.sent(),i.label=5;case 5:return s++,[3,2];case 6:return[4,o.finish()];case 7:return i.sent(),[2]}}))}))}}]}))}))},getRowsReader:function(e){return n(void 0,void 0,void 0,(function(){var a,u,d,h,b,v,y;return i(this,(function(w){switch(w.label){case 0:return[4,t.getSurface()];case 1:if("B8G8R8"!==(a=w.sent()).info.fmt.signature)throw new s.ErrorRI("Quant2 RowsReader expected the surface pixel format to be B8G8R8, but got <fmt>",{fmt:a.info.fmt.signature});return u=a.width,d={size:r,fmt:new l.PixelFormat(f)},h=new Uint8Array((0,c.getImageLineSize)(d)),[4,(b=new o.Histogram).addImageBGR(a)];case 2:return w.sent(),(v=null==e?void 0:e.palette)?b.makePalette(v):b.makePaletteN(),d.fmt.setPalette(b.pal),y=p(b,u),[2,{dstInfo:d,readRow:function(e){return n(void 0,void 0,void 0,(function(){return i(this,(function(t){return y(a.getRowBuffer(e),h),[2,h]}))}))},finish:function(){return n(void 0,void 0,void 0,(function(){return i(this,(function(e){return[2]}))}))}}]}}))}))},getSurface:function(e){return n(void 0,void 0,void 0,(function(){var r,n,a,c,l,f,d,h,b;return i(this,(function(i){switch(i.label){case 0:return r=(e||{}).palette,[4,t.getSurface()];case 1:if(n=i.sent(),a=n.width,c=n.height,"B8G8R8"!==(l=n.info.fmt.signature))throw new s.ErrorRI("Quant2Converter.getSurface expected B8G8R8, but got <fmt>",{fmt:l});for((f=new o.Histogram).addImageBGR(n),r?f.makePalette(r):f.makePaletteN(256),d=u.SurfaceStd.create(a,c,8,{colorModel:"Indexed",palette:f.pal}),h=p(f,a),b=0;b<c;b++)h(n.getRowBuffer(b),d.getRowBuffer(b));return[2,d]}}))}))}}}},5314:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.rowsConverter=void 0;var o=r(7716),a=r(8450),s=r(8512);t.rowsConverter=function(e){var t=e.nextConverter,r=e.size,u=e.makeRowCvt;return{progress:e.progress,getRowsWriter:function(a){return n(void 0,void 0,void 0,(function(){var c,l,f,d;return i(this,(function(h){switch(h.label){case 0:return c=new Uint8Array((0,o.getImageLineSize)(a)),l=(0,s.makeDstInfoStd)(a,e),[4,t.getRowsWriter(l)];case 1:return f=h.sent(),d=u(r.x,a.fmt,l.fmt),[2,{getBuffer:function(){return n(void 0,void 0,void 0,(function(){return i(this,(function(e){return[2,c]}))}))},flushBuffer:function(e){return n(void 0,void 0,void 0,(function(){var t;return i(this,(function(r){switch(r.label){case 0:return[4,f.getBuffer(e)];case 1:return t=r.sent(),d(c,t),[4,f.flushBuffer(e)];case 2:return r.sent(),[2]}}))}))},finish:function(){return n(void 0,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,f.finish()];case 1:return e.sent(),[2]}}))}))}}]}}))}))},getRowsReader:function(){return n(void 0,void 0,void 0,(function(){var r,a,c,l,f,d;return i(this,(function(h){switch(h.label){case 0:return[4,t.getRowsReader()];case 1:return r=h.sent(),a=r.dstInfo,c=(0,s.makeDstInfoStd)(a,e),l=new Uint8Array((0,o.getImageLineSize)(c)),f=c.size.x,d=u(f,a.fmt,c.fmt),[2,{dstInfo:c,readRow:function(e){return n(void 0,void 0,void 0,(function(){var t;return i(this,(function(n){switch(n.label){case 0:return[4,r.readRow(e)];case 1:return t=n.sent(),d(t,l),[2,l]}}))}))},finish:function(){return n(void 0,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,r.finish()];case 1:return e.sent(),[2]}}))}))}}]}}))}))},getSurface:function(){return n(void 0,void 0,void 0,(function(){var r,n,o,c,l,f,d,h,p;return i(this,(function(i){switch(i.label){case 0:return[4,t.getRowsReader()];case 1:r=i.sent(),n=r.dstInfo,o=(0,s.makeDstInfoStd)(n,e),c=new a.SurfaceStd(o),l=c.width,f=c.height,d=u(l,n.fmt,c.info.fmt),h=0,i.label=2;case 2:return h<f?[4,r.readRow(h)]:[3,5];case 3:p=i.sent(),d(p,c.getRowBuffer(h)),i.label=4;case 4:return h++,[3,2];case 5:return[4,r.finish()];case 6:return i.sent(),[2,c]}}))}))}}}},2479:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createConverterForRead=t.createRowsReader=t.createConverterForWrite=t.createConverterFromList=void 0;var n=r(3945),i=r(5600),o=r(1373),a=r(9488),s=r(4439);t.createConverterFromList=function(e,t,r){return e.reduce((function(e,n){return n.create({nextConverter:e,size:t.size,srcSign:n.srcSign,dstSign:n.dstSign,progress:r})}),(0,n.surfaceConverter)(t))},t.createConverterForWrite=function(e,r,u){var c;if(e.info.fmt.equals(r))return(0,n.surfaceConverter)(e,null==u?void 0:u.progress);var l=(0,a.buildConverterGraph)(null!==(c=null==u?void 0:u.converterSearchProps)&&void 0!==c?c:i.defaultConverterSearchProps,s.allConverters),f=(0,o.findPathEx)(e.info.fmt.signature,r.signature,l);return(0,t.createConverterFromList)(f,e,null==u?void 0:u.progress)},t.createRowsReader=function(e,r,n){var i=null!=r?r:e.info.fmt,o=(0,t.createConverterForWrite)(e,i,n),a=i.palette;return o.getRowsReader({palette:a})},t.createConverterForRead=function(e,r,u){var c;if(e.equals(r.info.fmt))return(0,n.surfaceConverter)(r,null==u?void 0:u.progress);var l=(0,a.buildConverterGraph)(null!==(c=null==u?void 0:u.converterSearchProps)&&void 0!==c?c:i.defaultConverterSearchProps,s.allConverters),f=(0,o.findPathEx)(e.signature,r.info.fmt.signature,l);return f.reverse(),(0,t.createConverterFromList)(f,r,null==u?void 0:u.progress)}},1160:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createFloydSteinberg=t.createFloydSteinberg16=t.createFloydSteinberg8=void 0;var n=r(447);t.createFloydSteinberg8=function(e,t){var r=t*(e+2),i=new Int16Array(r),o=new Int16Array(r),a=!0,s=i,u=o,c=0,l=0,f=0,d=0;return{startLine:function(){s=(a=!a)?o:i,f=a?-1:1,d=a?e-1:0,l=t,c=e*t,(u=a?i:o).fill(0,c,c+t)},getX:function(){return d},getNew:function(e,t){var r=s[l+e]+8>>4;return(0,n.rangeLimit)(t+r)},setError:function(e,r){var n=2*r,i=r;u[c+e-t]=i,i+=n,u[c+e+t]+=i,i+=n,u[c+e]+=i,i+=n,s[l+e+t]+=i},nextPixel:function(){l+=t,c-=t,d+=f}}},t.createFloydSteinberg16=function(e,t){var r=t*(e+2),i=new Int32Array(r),o=new Int32Array(r),a=!0,s=i,u=o,c=0,l=0,f=0,d=0;return{startLine:function(){s=(a=!a)?o:i,f=a?-1:1,d=a?e-1:0,l=t,c=e*t,(u=a?i:o).fill(0,c,c+t)},getX:function(){return d},getNew:function(e,t){var r=s[l+e]+8>>4;return(0,n.rangeLimit16)(t+r)},setError:function(e,r){var n=2*r,i=r;u[c+e-t]=i,i+=n,u[c+e+t]+=i,i+=n,u[c+e]+=i,i+=n,s[l+e+t]+=i},nextPixel:function(){l+=t,c-=t,d+=f}}},t.createFloydSteinberg=function(e,r){var n;return 16===(null===(n=r.samples[0])||void 0===n?void 0:n.length)?(0,t.createFloydSteinberg16)(e,r.samples.length):(0,t.createFloydSteinberg8)(e,r.samples.length)}},6414:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.factoryIndexedUp=t.factoryIndexedDown=t.factoryQuant2=t.factoryDithering=t.factoryPalette=t.factoryRowOp=t.makeDefaultProps=void 0;var i=r(447),o=r(5314),a=r(1160),s=r(4621),u=r(2780),c=r(8175);t.makeDefaultProps=function(e){var t,r,n;return{loss:null!==(t=null==e?void 0:e.loss)&&void 0!==t&&t,speed:null!==(r=null==e?void 0:e.speed)&&void 0!==r?r:100,quality:null!==(n=null==e?void 0:e.quality)&&void 0!==n?n:100,dithering:null==e?void 0:e.dithering}},t.factoryRowOp=function(e,r,i,a,s){return{label:s,srcSign:e,dstSign:r,props:(0,t.makeDefaultProps)(a),create:function(e){return(0,o.rowsConverter)(n(n({},e),{makeRowCvt:function(e){return function(t,r){return i(e,t,r)}}}))}}};var l=function(e,t,r){if(!e)throw new i.ErrorRI("Expected palette for <src> to <dst> converter",{src:t,dst:r});return e};t.factoryPalette=function(e,r,i,a,s,u){return{label:u,srcSign:e,dstSign:r,props:(0,t.makeDefaultProps)(s),create:function(t){return(0,o.rowsConverter)(n(n({},t),{makeRowCvt:function(t,n){var o=n.palette,s=a(l(o,e,r));return function(e,r){return i(t,e,r,s)}}}))}}},t.factoryDithering=function(e,r,i,s,u){return{label:u,srcSign:e,dstSign:r,props:n(n({},(0,t.makeDefaultProps)(s)),{dithering:!0,loss:!0}),create:function(e){return(0,o.rowsConverter)(n(n({},e),{makeRowCvt:function(e,t){var r=(0,a.createFloydSteinberg)(e,t);return function(t,n){return i(e,t,n,r)}}}))}}},t.factoryQuant2=function(e,r){return{label:r,srcSign:"B8G8R8",dstSign:"I8",props:n(n({},(0,t.makeDefaultProps)(e)),{loss:!0}),create:function(t){return(0,s.quant2Converter)(n(n({},t),{dithering:e.dithering}))}}},t.factoryIndexedDown=function(e,r,i,o,a){var s=n(n({},(0,t.makeDefaultProps)(o)),{loss:!0});return{label:a,srcSign:e,dstSign:r,props:s,create:function(e){return(0,c.paletteReduceConverter)(n(n({},e),{rowOp:i,dithering:!!s.dithering}))}}},t.factoryIndexedUp=function(e,r,i,a,s){return{label:s,srcSign:e,dstSign:r,props:(0,t.makeDefaultProps)(a),create:function(e){return(0,o.rowsConverter)(n(n({},e),{makeDstInfo:function(e){var t=new u.PixelFormat(r);return t.setPalette(l(e.fmt.palette,e.fmt.signature,r)),{size:e.size,fmt:t}},makeRowCvt:function(e){return function(t,r){return i(e,t,r)}}}))}}}},4704:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(9858),t),i(r(7159),t),i(r(7999),t),i(r(2479),t),i(r(1418),t)},9777:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Box=void 0;var n=r(7664),i=function(){function e(e,t,r){this.c0min=0,this.c1min=0,this.c2min=0,this.colorcount=0,"object"==typeof e?(this.c0min=e.c0min,this.c0max=e.c0max,this.c1min=e.c1min,this.c1max=e.c1max,this.c2min=e.c2min,this.c2max=e.c2max,this.colorcount=e.colorcount):(this.c0max=null!=e?e:0,this.c1max=null!=t?t:0,this.c2max=null!=r?r:0)}return e.createMax=function(){return new e(63,63,63)},Object.defineProperty(e.prototype,"isValid",{get:function(){return this.c0max>this.c0min||this.c1max>this.c1min||this.c2max>this.c2min},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"colorCount",{get:function(){return this.colorcount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"norm",{get:function(){var e=this.c0max-this.c0min,t=this.c1max-this.c1min,r=this.c2max-this.c2min;return e*e+t*t+r*r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"longestAxis",{get:function(){var e=0,t=this.c0max-this.c0min,r=this.c1max-this.c1min,n=t;return r>n&&(n=r,e=1),this.c2max-this.c2min>n&&(e=2),e},enumerable:!1,configurable:!0}),e.prototype.update=function(e){var t=this,r=t.c0min,i=t.c0max,o=t.c1min,a=t.c1max,s=t.c2min,u=t.c2max;if(i>r)e:for(var c=r;c<=i;c++)for(var l=o;l<=a;l++)for(var f=(0,n.calcHistOffsetFast)(c,l,s),d=s;d<=u;d++)if(0!==e[f++]){this.c0min=r=c;break e}if(i>r)e:for(c=i;c>=r;c--)for(l=o;l<=a;l++)for(f=(0,n.calcHistOffsetFast)(c,l,s),d=s;d<=u;d++)if(0!==e[f++]){this.c0max=i=c;break e}if(a>o)e:for(l=o;l<=a;l++)for(c=r;c<=i;c++)for(f=(0,n.calcHistOffsetFast)(c,l,s),d=s;d<=u;d++)if(0!==e[f++]){this.c1min=o=l;break e}if(a>o)e:for(l=a;l>=o;l--)for(c=r;c<=i;c++)for(f=(0,n.calcHistOffsetFast)(c,l,s),d=s;d<=u;d++)if(0!==e[f++]){this.c1max=a=l;break e}if(u>s)e:for(d=s;d<=u;d++)for(c=r;c<=i;c++)for(f=(0,n.calcHistOffsetFast)(c,o,d),l=o;l<=a;l++,f+=64)if(0!==e[f]){this.c2min=s=d;break e}if(u>s)e:for(d=u;d>=s;d--)for(c=r;c<=i;c++)for(f=(0,n.calcHistOffsetFast)(c,o,d),l=o;l<=a;l++,f+=64)if(0!==e[f]){this.c2max=u=d;break e}var h=0;for(c=r;c<=i;c++)for(l=o;l<=a;l++)for(f=(0,n.calcHistOffsetFast)(c,l,s),d=s;d<=u;d++,f++)0!==e[f]&&h++;this.colorcount=h},e.prototype.split=function(t,r){var n,i=new e(this);switch(t){case 0:n=this.c0max+this.c0min>>1,this.c0max=n,i.c0min=n+1;break;case 1:n=this.c1max+this.c1min>>1,this.c1max=n,i.c1min=n+1;break;case 2:n=this.c2max+this.c2min>>1,this.c2max=n,i.c2min=n+1}return this.update(r),i.update(r),i},e.prototype.computeColor=function(e){for(var t=0,r=0,i=0,o=0,a=this,s=a.c0min,u=a.c0max,c=a.c1min,l=a.c1max,f=a.c2min,d=a.c2max,h=s;h<=u;h++)for(var p=c;p<=l;p++)for(var b=(0,n.calcHistOffsetFast)(h,p,f),v=f;v<=d;v++){var y=e[b++];0!==y&&(t+=y,r+=((h<<2)+(h>>4))*y,i+=((p<<2)+(p>>4))*y,o+=((v<<2)+(v>>4))*y)}return[Math.floor((r+(t>>1))/t),Math.floor((i+(t>>1))/t),Math.floor((o+(t>>1))/t),255]},e}();t.Box=i},7664:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calcHistOffset=t.calcHistOffsetFast=t.createHistArray=void 0,t.createHistArray=function(){return new Uint16Array(262144)},t.calcHistOffsetFast=function(e,t,r){return((e<<6)+t<<6)+r},t.calcHistOffset=function(e,r,n){return(0,t.calcHistOffsetFast)(e>>2,r>>2,n>>2)}},1154:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Histogram=void 0;var a=r(8643),s=r(9777),u=r(7664),c=r(1563),l=r(447),f=function(){function e(){this.isPalReady=!1,this.hist=(0,u.createHistArray)(),this.pal=[]}return e.prototype.addColor=function(e,t,r){var n=(0,u.calcHistOffset)(e,t,r);0==++this.hist[n]&&this.hist[n]--},e.prototype.addRowBGR=function(e,t){for(var r=0,n=3*e;r<n;){var i=t[r++],o=t[r++],a=t[r++];this.addColor(i,o,a)}},e.prototype.addImageBGR=function(e){return n(this,void 0,void 0,(function(){var t,r,n,o;return i(this,(function(i){if("B8G8R8"!==(t=e.info.fmt.signature))throw new l.ErrorRI("Invalid pixel format <fmt> in addImageBGR",{fmt:t});for(r=e.width,n=e.height,o=0;o<n;o++)this.addRowBGR(r,e.getRowBuffer(o));return[2]}))}))},e.prototype.addImage=function(e){},e.prototype.makePaletteN=function(e){void 0===e&&(e=0),this.makePalette((0,a.createFreePalette)(e))},e.prototype.makePalette=function(e){if(!this.isPalReady){this.isPalReady=!0;var t=0;if(0===e.length)this.pal=(0,a.createFreePalette)(256),t=this.pal.length;else{this.pal=o([],e,!0);for(var r=this.pal.length,n=0;n<r;n++)(0,a.isFreeColor)(this.pal[n])&&t++;if(0===t)return void this.hist.fill(0)}var i=[s.Box.createMax()];if(i[0].update(this.hist),(0,c.medianCut)(t,this.hist,i),i.length<this.pal.length){for(var u=this.pal.length;u>i.length&&(0,a.isFreeColor)(this.pal[u-1]);)--u;this.pal=this.pal.slice(0,u)}var l=0,f=i.length,d=this.pal.length;for(n=0;n!==f;n++){for(;l!==d&&!(0,a.isFreeColor)(this.pal[l]);)l++;if(l===d)break;this.pal[l++]=i[n].computeColor(this.hist)}this.hist.fill(0)}},e.prototype.cvt=function(e,t,r,n,i){for(var o=new Uint8Array(t,r),a=new Uint8Array(n,i),s=0,c=0,l=this.hist;c<e;){var f=o[s++]>>2,d=o[s++]>>2,h=o[s++]>>2,p=(0,u.calcHistOffsetFast)(f,d,h);0===l[p]&&this.fillInverseCmap(f,d,h),a[c++]=l[p]-1}},e.prototype.cvtDither=function(e,t,r,n,i,o){var a=new Uint8Array(t,r),s=new Uint8Array(n,i),c=this.hist;o.startLine();for(var f=e;f>0;f--){var d=o.getX(),h=3*d,p=o.getNew(0,a[h]),b=o.getNew(1,a[h+1]),v=o.getNew(2,a[h+2]),y=(0,u.calcHistOffset)(p,b,v);0===c[y]&&this.fillInverseCmap(p>>2,b>>2,v>>2);var w=c[y]-1;s[d]=w;var g=this.pal[w];if(!g)throw new l.ErrorRI("Invalid pallette index <n>. length=<L>",{n:w,L:this.pal.length});o.setError(0,p-g[0]),o.setError(1,b-g[1]),o.setError(2,v-g[2]),o.nextPixel()}},e.prototype.cvtDitherOld=function(e,t,r,n,i,o,a,s){var c=new Uint8Array(t,r),f=new Uint8Array(n,i),d=s?[3*(e-1),e-1,-1,a,o]:[0,0,1,o,a],h=d[0],p=d[1],b=d[2],v=d[3],y=d[4],w=3,g=3*e;y.fill(0,g,g+3);for(var m=this.hist,_=e;_>0;_--){var x=v[w]+8>>4,P=v[w+1]+8>>4,k=v[w+2]+8>>4;x+=c[h],P+=c[h+1],k+=c[h+2],x=(0,l.rangeLimit)(x),P=(0,l.rangeLimit)(P),k=(0,l.rangeLimit)(k);var O=(0,u.calcHistOffset)(x,P,k);0===m[O]&&this.fillInverseCmap(x>>2,P>>2,k>>2);var R=m[O]-1;f[p]=R;var S=this.pal[R];x-=S[0],P-=S[1],k-=S[2];var B=2*x;y[g-3]=x,x+=B,y[g+3]+=x,x+=B,y[g]+=x,x+=B,v[w+3]+=x,B=2*P,y[g+1-3]=P,P+=B,y[g+1+3]+=P,P+=B,y[g+1]+=P,P+=B,v[w+4]+=P,B=2*k,y[g+2-3]=k,k+=B,y[g+2+3]+=k,k+=B,y[g+2]+=k,k+=B,v[w+2+3]+=k,h+=3*b,p+=b,w+=3,g-=3}},e.prototype.fillInverseCmap=function(e,t,r){var n=2+((e>>=3)<<5),i=2+((t>>=3)<<5),o=2+((r>>=3)<<5),a=this.findNearbyColors(n,i,o),s=this.findBestColors(n,i,o,a);e<<=3,t<<=3,r<<=3;for(var c=0,l=this.hist,f=0;f<8;f++)for(var d=0;d<8;d++)for(var h=(0,u.calcHistOffsetFast)(e+f,t+d,r),p=0;p<8;p++)l[h++]=s[c++]+1},e.prototype.findNearbyColors=function(e,t,r){for(var n,i,o,a=this.pal.length,s=new Array(256),u=e+28,c=e+u>>1,l=t+28,f=t+l>>1,d=r+28,h=r+d>>1,p=Number.MAX_SAFE_INTEGER,b=0;b<a;b++){var v=this.pal[b][0];v<e?(n=(o=v-e)*o,i=(o=v-u)*o):v>u?(n=(o=v-u)*o,i=(o=v-e)*o):(n=0,i=v<=c?(o=v-u)*o:(o=v-e)*o),(v=this.pal[b][1])<t?(n+=(o=v-t)*o,i+=(o=v-l)*o):v>l?(n+=(o=v-l)*o,i+=(o=v-t)*o):i+=v<=f?(o=v-l)*o:(o=v-t)*o,(v=this.pal[b][2])<r?(n+=(o=v-r)*o,i+=(o=v-d)*o):v>d?(n+=(o=v-d)*o,i+=(o=v-r)*o):i+=v<=h?(o=v-d)*o:(o=v-r)*o,s[b]=n,i<p&&(p=i)}var y=[];for(b=0;b<a;b++)s[b]<=p&&y.push(b);return y},e.prototype.findBestColors=function(e,t,r,n){var i=n.length,o=[],a=new Array(512);a.fill(Number.MAX_SAFE_INTEGER);for(var s=0;s<i;s++){var u=n[s],c=this.pal[u],l=e-c[0],f=t-c[1],d=r-c[2],h=l*l+f*f+d*d;f=8*f+16,d=8*d+16;for(var p=0,b=0,v=l=8*l+16,y=7;y>=0;y--){for(var w=h,g=f,m=7;m>=0;m--){for(var _=w,x=d,P=7;P>=0;P--)_<a[p]&&(a[p]=_,o[b]=u),_+=x,x+=32,p++,b++;w+=g,g+=32}h+=v,v+=32}}return o},e}();t.Histogram=f},1563:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.medianCut=void 0;var r=function(e){for(var t=0,r=e.length,n=r,i=0;i!==r;++i){var o=e[i];o.colorCount>t&&o.isValid&&(t=o.colorCount,n=i)}return n},n=function(e){for(var t=0,r=e.length,n=r,i=0;i!==r;i++){var o=e[i].norm;o>t&&(n=i,t=o)}return n};t.medianCut=function(e,t,i){for(;i.length<e;){var o=2*i.length<=e?r(i):n(i);if(o===i.length)break;var a=i[o],s=a.split(a.longestAxis,t);i.push(s)}}},7291:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(1154),t)},7159:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.readImage=void 0;var o=r(1418),a=r(3200);t.readImage=function(e,t,r,s){return void 0===s&&(s=a.rowOrderForward),n(void 0,void 0,void 0,(function(){var n,a,u,c,l,f,d;return i(this,(function(i){switch(i.label){case 0:return n=t.size.y,a=s(n),[4,e.getRowsWriter(t)];case 1:return u=i.sent(),[4,(c=(0,o.createProgressTracker)(e.progress,"read",n))(0,0,!0)];case 2:i.sent(),l=0,i.label=3;case 3:return l<n?"number"!=typeof(f=a.next().value)?[3,8]:[4,c(l,f)]:[3,9];case 4:return i.sent(),[4,u.getBuffer(f)];case 5:return d=i.sent(),[4,r(d,f,l)];case 6:return i.sent(),[4,u.flushBuffer(f)];case 7:i.sent(),i.label=8;case 8:return l++,[3,3];case 9:return[4,c(n,n)];case 10:return i.sent(),[4,u.finish()];case 11:return i.sent(),[2]}}))}))}},1215:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.copyBytes=void 0,t.copyBytes=function(e,t,r,n,i){for(var o=i,a=r,s=a+e;a<s;)n[o++]=t[a++]}},6787:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.copyWordsFromBigEndian=void 0,t.copyWordsFromBigEndian=function(e,t,r,n,i){for(var o=new DataView(t,r),a=new Uint16Array(n,i),s=0;s<e;s++)a[s]=o.getUint16(2*s,!1)}},4193:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.grayAlpha16toGrayAlpha8=t.gray16toGray8=void 0,t.gray16toGray8=function(e,t,r){for(var n=new Uint16Array(t.buffer,t.byteOffset),i=0,o=0,a=e;o<a;)r[o++]=n[i++]>>8},t.grayAlpha16toGrayAlpha8=function(e,r,n){return(0,t.gray16toGray8)(2*e,r,n)}},7146:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.gray1toGray8=void 0,t.gray1toGray8=function(e,t,r){for(var n=0,i=0,o=0,a=0,s=e;a<s;)0===i&&(i=128,o=t[n++]),r[a++]=o&i?255:0,i>>=1}},4366:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.gray1toRgba32=t.gray1toRgb24=void 0,t.gray1toRgb24=function(e,t,r){for(var n=0,i=0,o=0,a=0,s=3*e;a<s;){0===i&&(i=128,o=t[n++]);var u=o&i?255:0;r[a++]=u,r[a++]=u,r[a++]=u,i>>=1}},t.gray1toRgba32=function(e,t,r){for(var n=0,i=0,o=0,a=0,s=4*e;a<s;){0===i&&(i=128,o=t[n++]);var u=o&i?255:0;r[a++]=u,r[a++]=u,r[a++]=u,r[a++]=255,i>>=1}}},5208:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.gray8toGray1Dither=t.gray8toGray1Fast=void 0,t.gray8toGray1Fast=function(e,t,r){for(var n=0,i=0,o=7,a=0;n<e;)a|=t[n++]>>7<<o,--o<0&&(r[i++]=a,a=0,o=7);o<7&&(r[i]=a)},t.gray8toGray1Dither=function(e,t,r,n){n.startLine();for(var i=0;i<e;i++){var o=n.getX(),a=t[o],s=n.getNew(0,a),u=s<128?0:255;n.setError(0,s-u);var c=o>>3,l=128>>(7&o);u?r[c]|=l:r[c]&=~l,n.nextPixel()}}},3866:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.grayAlpha8toRgba8=t.gray8toRgba8=t.gray8toRgb8=void 0,t.gray8toRgb8=function(e,t,r){for(var n=0,i=0;n<e;){var o=t[n++];r[i++]=o,r[i++]=o,r[i++]=o}},t.gray8toRgba8=function(e,t,r){for(var n=0,i=0;n<e;){var o=t[n++];r[i++]=o,r[i++]=o,r[i++]=o,r[i++]=255}},t.grayAlpha8toRgba8=function(e,t,r){for(var n=0,i=0,o=4*e;i<o;){var a=t[n++];r[i++]=a,r[i++]=a,r[i++]=a,r[i++]=t[n++]}}},1968:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.indexed8toRgb32=t.indexed8toRgb24=t.makePaletteCacheRgba=t.makePaletteCacheBgra=void 0,t.makePaletteCacheBgra=function(e){for(var t=new Uint8Array(e.length<<2),r=0,n=0,i=r+e.length;r<i;){var o=e[r++];t[n++]=o[0],t[n++]=o[1],t[n++]=o[2],t[n++]=o[3]}return t},t.makePaletteCacheRgba=function(e){for(var t=new Uint8Array(e.length<<2),r=0,n=0,i=r+e.length;r<i;){var o=e[r++];t[n++]=o[2],t[n++]=o[1],t[n++]=o[0],t[n++]=o[3]}return t},t.indexed8toRgb24=function(e,t,r,n){for(var i=0,o=0;i<e;){var a=t[i++]<<2;r[o++]=n[a++],r[o++]=n[a++],r[o++]=n[a++]}},t.indexed8toRgb32=function(e,t,r,n){for(var i=0,o=0;i<e;){var a=t[i++]<<2;r[o++]=n[a++],r[o++]=n[a++],r[o++]=n[a++],r[o++]=n[a++]}}},2397:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pack8to1bit=t.pack8to4bits=void 0,t.pack8to4bits=function(e,t,r){for(var n=0,i=0,o=0;o<e;){var a=t[o++];1==(1&o)?n=a<<4:(n|=15&a,r[i++]=n)}1==(1&o)&&(r[i]=n)},t.pack8to1bit=function(e,t,r){for(var n=0,i=0,o=7,a=0;a<e;)n|=(1&t[a++])<<o,--o<0&&(r[i++]=n,n=0,o=7);7!==o&&(r[i]=n)}},6460:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.indexed4toIndexed8=t.indexed1toIndexed8=void 0,t.indexed1toIndexed8=function(e,t,r){for(var n=0,i=0,o=0,a=-1;n<e;)a<0&&(a=7,o=t[i++]),r[n++]=o>>a&1,a--},t.indexed4toIndexed8=function(e,t,r){for(var n=0,i=0,o=0,a=-1;n<e;)a<0&&(a=4,o=t[i++]),r[n++]=o>>a&15,a-=4}},6585:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rgb15to24Fast=t.rgb15to24Quality=void 0,t.rgb15to24Quality=function(e,t,r){for(var n=new Uint16Array(t.buffer,t.byteOffset),i=0,o=0,a=i+e;i<a;){var s=n[i++],u=31&s;r[o++]=u>>2|u<<3,u=s>>5&31,r[o++]=u>>2|u<<3,u=s>>10&31,r[o++]=u>>2|u<<3}},t.rgb15to24Fast=function(e,t,r){for(var n=new Uint16Array(t.buffer,t.byteOffset),i=0,o=0,a=i+e;i<a;){var s=n[i++];r[o++]=s<<3,r[o++]=s>>2&248,r[o++]=s>>7&248}}},6828:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rgb24to15Dither=t.rgb24to15Fast=void 0,t.rgb24to15Fast=function(e,t,r){for(var n=new Uint16Array(r.buffer,r.byteOffset),i=0,o=0,a=i+e;o<a;){var s=t[i++]>>3,u=t[i++]>>3,c=t[i++]>>3;n[o++]=s|u<<5|c<<10}},t.rgb24to15Dither=function(e,t,r,n){var i=new Uint16Array(r.buffer,r.byteOffset);n.startLine();for(var o=0;o<e;o++){var a=n.getX(),s=3*a,u=n.getNew(0,t[s]),c=n.getNew(1,t[s+1]),l=n.getNew(2,t[s+2]),f=u>>3,d=c>>3,h=l>>3,p=f<<3|f>>2,b=d<<3|d>>2,v=h<<3|h>>2;n.setError(0,u-p),n.setError(1,c-b),n.setError(2,l-v),i[a]=f|d<<5|h<<10,n.nextPixel()}}},1447:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rgb24toG8=t.bgr24toG8=void 0;var r,n=function(e){return 65536*e+.5},i=function(){if(void 0!==r)return r;for(var e=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],t=n(.2126),i=n(.7152),o=n(.0722),a=0;a<256;a++)e[2][a]=t*a,e[1][a]=i*a,e[0][a]=o*a+32768;return r=e,e};t.bgr24toG8=function(e,t,r){for(var n=i(),o=0,a=0;a<e;){var s=t[o++],u=t[o++],c=t[o++];r[a++]=n[0][s]+n[1][u]+n[2][c]>>16}},t.rgb24toG8=function(e,t,r){for(var n=i(),o=0,a=0;a<e;){var s=t[o++],u=t[o++],c=t[o++];r[a++]=n[0][c]+n[1][u]+n[2][s]>>16}}},1007:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rgb24toRgba32AndSwapRB=t.rgb24toRgba32=void 0,t.rgb24toRgba32=function(e,t,r){for(var n=0,i=0,o=4*e;i<o;)r[i++]=t[n++],r[i++]=t[n++],r[i++]=t[n++],r[i++]=255},t.rgb24toRgba32AndSwapRB=function(e,t,r){for(var n=0,i=0,o=4*e;i<o;){var a=t[n++],s=t[n++],u=t[n++];r[i++]=u,r[i++]=s,r[i++]=a,r[i++]=255}}},5432:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rgb48to24Fast=void 0,t.rgb48to24Fast=function(e,t,r){for(var n=new Uint16Array(t.buffer,t.byteOffset),i=0,o=0,a=3*e;o<a;)r[o++]=n[i++]>>8,r[o++]=n[i++]>>8,r[o++]=n[i++]>>8}},4845:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rgb64to32Fast=void 0,t.rgb64to32Fast=function(e,t,r){for(var n=new Uint16Array(t.buffer,t.byteOffset),i=0,o=0,a=4*e;o<a;)r[o++]=n[i++]>>8,r[o++]=n[i++]>>8,r[o++]=n[i++]>>8,r[o++]=n[i++]>>8}},2767:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.swapRedBlue32=t.swapRedBlue24=void 0,t.swapRedBlue24=function(e,t,r){for(var n=0,i=0,o=3*e;i<o;){var a=t[n++],s=t[n++],u=t[n++];r[i++]=u,r[i++]=s,r[i++]=a}},t.swapRedBlue32=function(e,t,r){for(var n=0,i=0,o=4*e;i<o;){var a=t[n++],s=t[n++],u=t[n++],c=t[n++];r[i++]=u,r[i++]=s,r[i++]=a,r[i++]=c}}},3200:function(e,t){"use strict";var r=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};function n(e){var t;return r(this,(function(r){switch(r.label){case 0:t=0,r.label=1;case 1:return t<e?[4,t]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}}))}function i(e){var t;return r(this,(function(r){switch(r.label){case 0:t=e-1,r.label=1;case 1:return t>=0?[4,t]:[3,4];case 2:r.sent(),r.label=3;case 3:return t--,[3,1];case 4:return[2]}}))}Object.defineProperty(t,"__esModule",{value:!0}),t.stdRowOrder=t.rowOrderBackward=t.rowOrderForward=void 0,t.rowOrderForward=n,t.rowOrderBackward=i,t.stdRowOrder=function(e){return"forward"===e?n:i}},7692:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultConverterSearchProps=void 0,t.defaultConverterSearchProps={prefer:"quality",dithering:!0}},9488:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildConverterGraph=void 0;var n=r(8591);t.buildConverterGraph=function(e,t){var r={},i=function(e){var t=r[e];return t||(t=function(e){return{sign:e,edges:[],distance:0}}(e),r[e]=t),t};return t.forEach((function(t){var r=t.srcSign,o=t.dstSign;(0,n.calcConverterWeight)(t,e)>0&&(i(r).edges.push({descr:t}),i(o))})),r}},8591:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calcConverterWeight=void 0,t.calcConverterWeight=function(e,t){var r=e.props;return r.dithering&&!1===t.dithering?0:r[t.prefer]}},1373:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findPathEx=t.findPath=void 0;var n=r(447);t.findPath=function(e,t,r){var n=r[e],i=[];if(n){!function(e){Object.keys(e).forEach((function(t){var r=e[t];r&&(r.distance=Number.MAX_SAFE_INTEGER,r.prevEdge=void 0)}))}(r),n.distance=0;for(var o=[n],a=function(){var e=o.shift();if(e.sign===t){for(var n=e.prevEdge;n;){i.unshift(n.descr);var a=r[n.descr.srcSign];n=null==a?void 0:a.prevEdge}return"break"}e.edges.forEach((function(t){var n=r[t.descr.dstSign];if(n){var i=e.distance+1;n.distance>i&&(n.distance=i,n.prevEdge=t,o.push(n))}}))};o.length&&"break"!==a(););}return i.length>0?i:void 0},t.findPathEx=function(e,r,i){var o=(0,t.findPath)(e,r,i);if(!o)throw new n.ErrorRI("Can't find converter from <src> to <dst>",{src:e,dst:r});return o}},5600:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(7692),t)},3945:function(e,t){"use strict";var r=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},n=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.surfaceConverter=void 0,t.surfaceConverter=function(e,t){return{progress:t,desiredPalette:e.palette,getRowsWriter:function(t){return r(this,void 0,void 0,(function(){var i,o=this;return n(this,(function(a){return(i=t.fmt.palette)&&e.setPalette(i),[2,{getBuffer:function(t){return r(o,void 0,void 0,(function(){return n(this,(function(r){return[2,e.getRowBuffer(t)]}))}))},flushBuffer:function(){return r(o,void 0,void 0,(function(){return n(this,(function(e){return[2]}))}))},finish:function(){return r(o,void 0,void 0,(function(){return n(this,(function(e){return[2]}))}))}}]}))}))},getRowsReader:function(){return r(this,void 0,void 0,(function(){var t=this;return n(this,(function(i){return[2,{dstInfo:e.info,readRow:function(i){return r(t,void 0,void 0,(function(){return n(this,(function(t){return[2,e.getRowBuffer(i)]}))}))},finish:function(){return r(t,void 0,void 0,(function(){return n(this,(function(e){return[2]}))}))}}]}))}))},getSurface:function(){return r(this,void 0,void 0,(function(){return n(this,(function(t){return[2,e]}))}))}}}},7999:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.writeImage=void 0;var o=r(1418),a=r(3200);t.writeImage=function(e,t,r){return n(void 0,void 0,void 0,(function(){var n,s,u,c,l,f,d,h,p,b,v;return i(this,(function(i){switch(i.label){case 0:return s=(n=r||{}).progress,u=n.rowOrder,c=void 0===u?a.rowOrderForward:u,l=e.dstInfo,f=l.size.y,d=c(f),[4,(h=(0,o.createProgressTracker)(s,"write",f))(0,0,!0)];case 1:i.sent(),p=0,i.label=2;case 2:return p<f?"number"!=typeof(b=d.next().value)?[3,6]:[4,h(p,b)]:[3,7];case 3:return i.sent(),[4,e.readRow(b)];case 4:return v=i.sent(),[4,t(v,b,p)];case 5:i.sent(),i.label=6;case 6:return p++,[3,2];case 7:return[4,h(f,f)];case 8:return i.sent(),[4,e.finish()];case 9:return i.sent(),[2]}}))}))}},6856:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.copyImageInfo=t.getImageLineSize=t.createInfoSign=t.createInfo=t.createInfoSize=void 0;var n=r(5530),i=r(4485),o=r(6279),a=r(6697);t.createInfoSize=function(e,t,r,i,o,a){return void 0===r&&(r="Auto"),{size:e,fmt:new n.PixelFormat({depth:t,colorModel:r,alpha:i,palette:o}),vars:a}},t.createInfo=function(e,r,n,o,a,s,u){return void 0===o&&(o="Auto"),(0,t.createInfoSize)(new i.Point(e,r),n,o,a,s,u)},t.createInfoSign=function(e,t,r,o){return{size:new i.Point(e,t),fmt:new n.PixelFormat(r),vars:o}},t.getImageLineSize=function(e){var t=e.pitch,r=e.size,n=e.fmt;return null!=t?t:(0,a.calcPitch)(r.x,n.depth)},t.copyImageInfo=function(e){return{size:e.size.clone(),fmt:e.fmt,vars:e.vars&&(0,o.copyVars)(e.vars),pitch:e.pitch}}},6757:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)},i=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};Object.defineProperty(t,"__esModule",{value:!0}),t.fromParcelImageInfo=t.toParcelImageInfo=void 0;var o=r(4485),a=r(5530);t.toParcelImageInfo=function(e){var t=e.size,r=e.fmt,o=i(e,["size","fmt"]);return n({width:t.x,height:t.y,fmt:r.toParcel()},o)},t.fromParcelImageInfo=function(e){var t=e.width,r=e.height,s=e.fmt,u=i(e,["width","height","fmt"]);return n({size:new o.Point(t,r),fmt:a.PixelFormat.fromParcel(s)},u)}},6279:function(e,t){"use strict";var r=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.getVarNumber=t.cloneVarValue=t.copyVars=void 0,t.copyVars=function(e){var r={};return Object.entries(e).forEach((function(e){var n=e[0],i=e[1];r[n]=(0,t.cloneVarValue)(i)})),r},t.cloneVarValue=function(e){return Array.isArray(e)?r([],e,!0):e},t.getVarNumber=function(e,t){if("number"==typeof e)return e;if("string"==typeof e){var r=+e;if(!Number.isNaN(r))return r}return t}},6697:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calcPitch=void 0,t.calcPitch=function(e,t,r){var n=e*(15===t?16:t)+7>>3;return r?r*~~((n+r-1)/r):n}},4490:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSizeAndDepth=void 0,t.getSizeAndDepth=function(e){return{width:e.size.x,height:e.size.y,depth:e.fmt.depth}}},7716:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(6856),t),i(r(4490),t),i(r(6757),t)},3748:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolutionFromMeters=t.resolutionToMeters=void 0;var n=r(447),i={meter:100,cm:1,mm:.1,inch:2.54},o=function(e){var t=i[e];if(!t)throw new n.ErrorRI("Unknown resolution unit: <resUnit>",{resUnit:e});return t};t.resolutionToMeters=function(e,t){return 100*e/o(t)},t.resolutionFromMeters=function(e,t){return e*o(t)/100}},2026:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4902:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.analyzePaletteTransparency=void 0,t.analyzePaletteTransparency=function(e){for(var t=-1,r=0;r<e.length;r++){var n=e[r][3];if(n<255){if(!(t<0&&0===n))return{type:"alpha"};t=r}}return t>=0?{type:"transparency",index:t}:{type:"opaque"}}},4897:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calcPaletteSize=void 0,t.calcPaletteSize=function(e,t){return e*(t.dword?4:3)}},2302:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createGrayPalette=t.createFreePalette=t.createPalette=void 0,t.createPalette=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=[0,0,0,255];return t},t.createFreePalette=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=[0,0,0,0];return t},t.createGrayPalette=function(e){for(var t=new Array(e),r=255/(e-1),n=0;n<e;n++){var i=Math.round(n*r);t[n]=[i,i,i,255]}return t}},9209:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isFreeColor=void 0,t.isFreeColor=function(e){return 0===e[0]&&0===e[1]&&0===e[2]&&0===e[3]}},8643:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(2026),t),i(r(2302),t),i(r(9209),t),i(r(1594),t),i(r(6093),t),i(r(786),t),i(r(4902),t)},1594:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.iEGA=t.paletteEGA=void 0;var r,n=170,i=85,o=255,a=255;t.paletteEGA=Object.freeze([[0,0,0,a],[n,0,0,a],[0,n,0,a],[n,n,0,a],[0,0,n,a],[n,0,n,a],[0,i,n,a],[n,n,n,a],[i,i,i,a],[o,i,i,a],[i,o,i,a],[o,o,i,a],[i,i,o,a],[o,i,o,a],[i,o,o,a],[o,o,o,a]]),function(e){e[e.black=0]="black",e[e.blue=1]="blue",e[e.green=2]="green",e[e.cyan=3]="cyan",e[e.red=4]="red",e[e.magenta=5]="magenta",e[e.brown=6]="brown",e[e.lightGray=7]="lightGray",e[e.darkGray=8]="darkGray",e[e.lightBlue=9]="lightBlue",e[e.lightGreen=10]="lightGreen",e[e.lightCyan=11]="lightCyan",e[e.lightRed=12]="lightRed",e[e.lightMagenta=13]="lightMagenta",e[e.yellow=14]="yellow",e[e.white=15]="white"}(r||(t.iEGA=r={}))},6093:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.readPaletteFromBuf=t.readPalette=void 0;var o=r(4897);t.readPalette=function(e,r,a){return n(void 0,void 0,void 0,(function(){var n,s;return i(this,(function(i){switch(i.label){case 0:return n=(0,o.calcPaletteSize)(r,a),[4,e.read(n)];case 1:return s=i.sent(),[2,(0,t.readPaletteFromBuf)(s,r,a)]}}))}))},t.readPaletteFromBuf=function(e,t,r){for(var n=new Array(t),i=0,o=r.rgb,a=r.dword,s=r.bits6,u=0;u<t;u++){var c=[0,0,0,255];if(c[o?2:0]=e[i++],c[1]=e[i++],c[o?0:2]=e[i++],!0===a?c[3]=e[i++]:"opaque"===a&&(c[3]=255,i++),s)for(var l=0;l<3;l++){var f=c[l];c[l]=f<<2|f>>4&3}n[u]=c}return n}},786:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.writePalette=t.writePaletteToBuf=void 0;var o=r(4897);t.writePaletteToBuf=function(e,t,r){for(var n=r.rgb,i=r.dword,o=r.bits6,a=0,s=i?4:3,u=0;u<e.length;u++)for(var c=e[u],l=c[0],f=c[1],d=c[2],h=c[3],p=n?[d,f,l,h]:[l,f,d,h],b=0;b<s;b++)t[a++]=o?p[b]>>2:p[b]},t.writePalette=function(e,r,a){return n(void 0,void 0,void 0,(function(){var n,s;return i(this,(function(i){switch(i.label){case 0:return n=(0,o.calcPaletteSize)(e.length,a),s=new Uint8Array(n),(0,t.writePaletteToBuf)(e,s,a),[4,r.write(s,n)];case 1:return i.sent(),[2]}}))}))}},261:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3952:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PixelFormat=void 0;var n=r(8384),i=r(8643),o=r(4449),a=r(4284),s=r(4962),u=r(1141),c=function(){function e(e,t,r){var n;if("number"!=typeof e||t&&"string"!=typeof t)if("number"==typeof e&&Array.isArray(t)){var u=(0,o.analysePixelFormatDef)({depth:e,palette:t,colorModel:"Indexed",alpha:"alpha"===(0,i.analyzePaletteTransparency)(t).type});f=u[0],d=u[1],this.samples=d,this.def=f}else if(!Array.isArray(e)||t&&"object"!=typeof t)if("object"==typeof e){var c=(0,o.analysePixelFormatDef)(e);f=c[0],d=c[1],this.def=f,this.samples=d}else"string"==typeof e?(this.samples=(0,a.parseSignature)(e),this.def=(0,s.defFromSamples)(this.samples)):(this.def={depth:0,colorModel:"Unknown"},this.samples=[]);else this.samples=e,this.def=null!==(n=t)&&void 0!==n?n:(0,s.defFromSamples)(e);else{var l=(0,o.analysePixelFormatDef)({depth:e,colorModel:t||"Auto",alpha:r}),f=l[0],d=l[1];this.def=f,this.samples=d}}return Object.defineProperty(e.prototype,"alpha",{get:function(){return!!this.def.alpha},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depth",{get:function(){return this.def.depth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depthAligned",{get:function(){var e=this.depth;return 15===e?16:e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"colorModel",{get:function(){return this.def.colorModel},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"palette",{get:function(){return this.def.palette},enumerable:!1,configurable:!0}),e.prototype.setPalette=function(e){this.def.palette=e},Object.defineProperty(e.prototype,"signature",{get:function(){return(0,u.signatureFromSamples)(this.samples)},enumerable:!1,configurable:!0}),e.prototype.equals=function(e){return(0,n.equalSamplesList)(this.samples,e.samples)&&JSON.stringify(this.palette)===JSON.stringify(e.palette)},Object.defineProperty(e.prototype,"sampleBitMasks",{get:function(){return this.samples.map((function(e){return BigInt((1<<e.length)-1)<<BigInt(e.shift)}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxSampleDepth",{get:function(){return this.samples.reduce((function(e,t){var r=t.length;return Math.max(e,r)}),0)},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return this.signature},e.prototype.toParcel=function(){return{def:this.def,samples:this.samples}},e.fromParcel=function(t){return new e(t.samples,t.def)},e.canvas=new e("R8G8B8A8"),e}();t.PixelFormat=c},2254:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4449:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.analysePixelFormatDef=void 0;var r=function(e,t){return t.map((function(t,r){return{sign:t,length:e,shift:r*e}}))};t.analysePixelFormatDef=function(e){var t=[],n=e.palette,i=e.depth,o=e.alpha,a=e.colorModel,s=!1;if("Auto"===a&&(a=n?"Indexed":i<=8?"Gray":"RGB"),"RGB"===a){var u=function(e,t,r,n){var i=[{shift:0,length:r,sign:"B"},{shift:r,length:t,sign:"G"},{shift:r+t,length:e,sign:"R"}];return n&&i.push({shift:r+t+e,length:n,sign:o?"A":"X"}),i};24!==i||o?32===i?(o=!1!==o,t=u(8,8,8,8)):16===i?t=o?u(5,5,5,1):u(5,6,5):15===i&&!0!==o?t=u(5,5,5):48===i&&!0!==o?t=u(16,16,16):64===i&&!1!==o?t=u(16,16,16,16):96===i&&!0!==o?t=u(32,32,32):128===i&&!1!==o?t=u(32,32,32,32):s=!0:t=u(8,8,8),o=null!=o?o:4===t.length}else if("Gray"===a){var c=function(e,r){t.push({sign:"G",shift:0,length:e}),r&&t.push({sign:"A",shift:e,length:r})};8!==i&&4!==i&&2!==i&&1!==i||!0===o?16===i?!0===o?c(8,8):c(16):32===i?!1!==o?c(16,16):c(i):64===i&&!1!==o?c(32,32):s=!0:c(i),o=null!=o?o:2===t.length}else"Indexed"===a?(o=!!o,t.push({sign:o?"J":"I",shift:0,length:i})):"CMYK"===a&&(32===i&&!0!==o?(o=!1,t=r(8,["C","M","Y","K"])):40===i&&!1!==o?(o=!0,t=r(8,["C","M","Y","K","A"])):s=!0);if(s)throw Error("Invalid pixel format: ".concat(i," bit/pixel, ").concat(a).concat(o?"+Alpha":""));return[{depth:i,colorModel:a,alpha:o,palette:n},t]}},4962:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defFromSamples=void 0;var r={BGR:"RGB",G:"Gray",I:"Indexed",CKMY:"CMYK"};t.defFromSamples=function(e,t){var n,i=[],o=!1,a=0;e.forEach((function(e){var t=e.sign,r=e.length;o=o||"A"===t||"J"===t,"A"!==t&&"X"!==t&&i.push("J"===t?"I":t),a+=r})),i.sort();var s=i.join(""),u=null!==(n=r[s])&&void 0!==n?n:"Unknown";return{depth:a,colorModel:u,alpha:o,palette:t}}},5530:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(3952),t),i(r(2254),t),i(r(261),t)},4284:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseSignature=void 0;var n=r(8384);t.parseSignature=function(e){if(!/^([A-Z]\d+)+$/.test(e))throw Error("Invalid pixel format signature [".concat(e,"]"));var t=e.replace(/(\d)([A-Z])/g,"$1,$2").split(",");if(t.length>5)throw Error("Too many samples in [".concat(e,"]"));var r=0;return t.map((function(t){var i=t[0],o=+t.slice(1);if(!n.sampleSignChars[i])throw Error("Unknown sample letter [".concat(i,"] in [").concat(e,"]"));if(!o||o>32)throw Error("Invalid sample size ".concat(o," in [").concat(e,"]"));var a={shift:r,length:o,sign:i};return r+=o,a}))}},1141:function(e,t){"use strict";var r=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.signatureFromSamples=void 0,t.signatureFromSamples=function(e){var t=r([],e,!0);return t.sort((function(e,t){return e.shift-t.shift})),t.map((function(e){var t=e.sign,r=e.length;return"".concat(t).concat(r)})).join("")}},8384:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.equalSamplesList=t.sampleSignChars=t.equalSamples=void 0,t.equalSamples=function(e,t){return e.shift===t.shift&&e.length===t.length&&e.sign===t.sign},t.sampleSignChars={R:!0,G:!0,B:!0,A:!0,X:!0,I:!0,J:!0,C:!0,M:!0,Y:!0,K:!0},t.equalSamplesList=function(e,r){return e.length===r.length&&e.reduce((function(e,n,i){return(0,t.equalSamples)(n,r[i])}),!0)}},9147:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4203:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Surface=void 0;var n=r(7716),i=function(){function e(e){this.info=e}return Object.defineProperty(e.prototype,"width",{get:function(){return this.info.size.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.info.size.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"colorModel",{get:function(){return this.info.fmt.colorModel},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"palette",{get:function(){return this.info.fmt.palette},enumerable:!1,configurable:!0}),e.prototype.setPalette=function(e){this.info.fmt.setPalette(e)},Object.defineProperty(e.prototype,"bitsPerPixel",{get:function(){return this.info.fmt.depth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.info.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rowSize",{get:function(){return(0,n.getImageLineSize)(this.info)},enumerable:!1,configurable:!0}),e.prototype.getRowOffset=function(e){return e*this.rowSize},e}();t.Surface=i},266:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.SurfaceImageData=void 0;var o=r(4485),a=r(5530),s=r(447),u=r(7716),c=function(e){function t(t){var r=e.call(this,{size:new o.Point(t.width,t.height),fmt:a.PixelFormat.canvas})||this;return r.imageData=t,r}return i(t,e),t.prototype.getRowBuffer=function(e){var t=this.imageData.data;return new Uint8Array(t.buffer,t.byteOffset+this.getRowOffset(e))},t.prototype.toParcel=function(){return{info:(0,u.toParcelImageInfo)(this.info),data:new Uint8Array(this.imageData.data.buffer,this.imageData.data.byteOffset)}},t.fromParcel=function(e){var r=(0,u.fromParcelImageInfo)(e.info);if(!a.PixelFormat.canvas.equals(r.fmt))throw new s.ErrorRI("Unsupported pixel format <fmt> for ImageData",{fmt:r.fmt.signature});var n=e.data;return new t(new ImageData(new Uint8ClampedArray(n.buffer,n.byteOffset),r.size.x,r.size.y))},t}(r(4203).Surface);t.SurfaceImageData=c},2790:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.SurfaceStd=void 0;var o=r(447),a=r(5530),s=r(7716),u=r(4485),c=function(e){function t(t,r){var n=e.call(this,t)||this;return n.info=t,n.data=null!=r?r:new Uint8Array((0,s.getImageLineSize)(n.info)*n.info.size.y),n}return i(t,e),t.createSize=function(e,r,n){var i;return new t({size:e,fmt:new a.PixelFormat({depth:r,colorModel:null!==(i=null==n?void 0:n.colorModel)&&void 0!==i?i:"Auto",alpha:null==n?void 0:n.alpha,palette:null==n?void 0:n.palette}),vars:null==n?void 0:n.vars},null==n?void 0:n.data)},t.create=function(e,r,n,i){return t.createSize(new u.Point(e,r),n,i)},t.createSign=function(e,r,n,i){var o=(0,s.createInfoSign)(e,r,n);return(null==i?void 0:i.palette)&&o.fmt.setPalette(null==i?void 0:i.palette),new t(o,null==i?void 0:i.data)},t.fromParcel=function(e){var r=e.info,n=e.data;return new t((0,s.fromParcelImageInfo)(r),n)},t.prototype.toParcel=function(){return{info:(0,s.toParcelImageInfo)(this.info),data:this.data}},t.prototype.createDataView=function(){return new DataView(this.data.buffer,this.data.byteOffset)},t.prototype.getRowBuffer=function(e){return(0,o.subBuffer)(this.data,this.getRowOffset(e),this.rowSize)},t.prototype.getRowBufferClamped=function(e){return new Uint8ClampedArray(this.data.buffer,this.data.byteOffset+this.getRowOffset(e),this.rowSize)},t.prototype.fill=function(e){new Uint8Array(this.data.buffer,this.data.byteOffset).fill(e)},t}(r(4203).Surface);t.SurfaceStd=c},8450:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(4203),t),i(r(2790),t),i(r(266),t),i(r(9147),t)},7172:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createPixelFiller=void 0;var n=r(447),i=r(7415),o=r(6487),a=r(7087),s=r(8753);t.createPixelFiller=function(e){var t=e.depth;switch(t){case 1:return i.pixelFiller1;case 4:return o.pixelFiller4;case 8:return a.pixelFiller8;default:if(0!=(7&t))throw new n.ErrorRI("Cant create pixel filler for <s>",{s:e.signature});return(0,s.pixelFillerN)(t>>3)}}},7415:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pixelFiller1=void 0,t.pixelFiller1=function(e,t,r){var n=e.src,i=e.dst,o=e.srcOffset,a=(e.dstOffset||0)+(r>>3),s=128>>(7&t),u=128>>(7&r);n[(o||0)+(t>>3)]&s?i[a]|=u:i[a]&=~u}},6487:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pixelFiller4=void 0,t.pixelFiller4=function(e,t,r){var n=e.src,i=e.srcOffset,o=e.dst,a=(e.dstOffset||0)+(r>>1),s=(1&t^1)<<2,u=n[(i||0)+(t>>1)]>>s&15,c=(1&r^1)<<2,l=240>>c;o[a]=o[a]&l|u<<c}},7087:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pixelFiller8=void 0,t.pixelFiller8=function(e,t,r){var n=e.src,i=e.srcOffset;e.dst[(e.dstOffset||0)+r]=n[(i||0)+t]}},8753:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pixelFillerN=void 0,t.pixelFillerN=function(e){return function(t,r,n){for(var i=t.src,o=t.srcOffset,a=t.dst,s=t.dstOffset,u=(o||0)+r*e,c=(s||0)+n*e,l=0;l<e;l++)a[c++]=i[u++]}}},2088:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},9682:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.writeBmpCoreHeader=t.readBmpCoreHeader=t.bmpCoreHeaderSize=void 0,t.bmpCoreHeaderSize=12,t.readBmpCoreHeader=function(e,t){var r=new DataView(e,t);return{bcSize:r.getUint32(0,!0),bcWidth:r.getUint16(4,!0),bcHeight:r.getUint16(6,!0),bcPlanes:r.getUint16(8,!0),bcBitCount:r.getUint16(10,!0)}},t.writeBmpCoreHeader=function(e,t,r){var n=new DataView(t,r);n.setUint32(0,e.bcSize,!0),n.setUint16(4,e.bcWidth,!0),n.setUint16(6,e.bcHeight,!0),n.setUint16(8,e.bcPlanes,!0),n.setUint16(10,e.bcBitCount,!0)}},5074:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.writeBmpFileHeader=t.readBmpFileHeader=t.bmpSignature=t.bmpFileHeaderSize=void 0,t.bmpFileHeaderSize=14,t.bmpSignature=19778,t.readBmpFileHeader=function(e,t){var r=new DataView(e,t);return{bfType:r.getUint16(0,!0),bfSize:r.getUint32(2,!0),bfOffBits:r.getUint32(10,!0)}},t.writeBmpFileHeader=function(e,t,r){var n=new DataView(t,r);n.setUint16(0,19778,!0),n.setUint32(2,e.bfSize,!0),n.setUint32(6,0),n.setUint16(10,e.bfOffBits,!0)}},8695:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.writeBmpInfoHeader=t.readBmpInfoHeader=t.getBmpCompressionName=t.bmpInfoHeaderSize=void 0,t.bmpInfoHeaderSize=40;var n=((r={})[0]="RGB",r[1]="RLE8",r[2]="RLE4",r[3]="BITFIELDS",r[4]="JPEG",r[5]="PNG",r);t.getBmpCompressionName=function(e){return n[e]||e.toString(16)},t.readBmpInfoHeader=function(e,t){var r=new DataView(e,t);return{biSize:r.getUint32(0,!0),biWidth:r.getInt32(4,!0),biHeight:r.getInt32(8,!0),biPlanes:r.getUint16(12,!0),biBitCount:r.getUint16(14,!0),biCompression:r.getUint32(16,!0),biSizeImage:r.getUint32(20,!0),biXPelsPerMeter:r.getInt32(24,!0),biYPelsPerMeter:r.getInt32(28,!0),biClrUsed:r.getUint32(32,!0),biClrImportant:r.getUint32(36,!0)}},t.writeBmpInfoHeader=function(e,t,r){var n=new DataView(t,r);n.setUint32(0,e.biSize,!0),n.setInt32(4,e.biWidth,!0),n.setInt32(8,e.biHeight,!0),n.setUint16(12,e.biPlanes,!0),n.setUint16(14,e.biBitCount,!0),n.setUint32(16,e.biCompression,!0),n.setUint32(20,e.biSizeImage,!0),n.setInt32(24,e.biXPelsPerMeter,!0),n.setInt32(28,e.biYPelsPerMeter,!0),n.setUint32(32,e.biClrUsed,!0),n.setUint32(36,e.biClrImportant,!0)}},1829:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.FormatBmp=void 0;var o=r(1841),a=function(){function e(e){this.stream=e,this.frames=[],this.vars={}}return e.create=function(t){return n(this,void 0,void 0,(function(){var r,n;return i(this,(function(i){switch(i.label){case 0:return r=new e(t),[4,o.FrameBmp.create(r)];case 1:return n=i.sent(),r.frames=[n],[2,r]}}))}))},e}();t.FormatBmp=a},1841:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)},i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.FrameBmp=void 0;var a=r(5074),s=r(447),u=r(4485),c=r(9682),l=r(5530),f=r(6093),d=r(8695),h=r(185),p=r(8864),b=r(2040),v=r(8781),y=r(4263),w=r(2681),g={12:"os2",64:"os2",56:"v3"},m=function(){function e(e,t,r,n,i,o){this.format=e,this.info=t,this.offset=r,this.size=n,this.isUpDown=i,this.compression=o,this.type="image"}return e.create=function(t){var r=this,n=t.stream;return(0,w.streamLock)(n,(function(){return i(r,void 0,void 0,(function(){var r,i,b,v,w,m,_,x,P,k,O,R,S,B,I,z,M,j,A,F,G,E,C,U,D,T;return o(this,(function(o){switch(o.label){case 0:return[4,n.seek(0)];case 1:return o.sent(),r={ext:p.driverBmp.extensions[0],name:p.driverBmp.name},i=!1,b=0,[4,n.read(a.bmpFileHeaderSize+4)];case 2:return v=o.sent(),(w=(0,a.readBmpFileHeader)(v.buffer,v.byteOffset)).bfType!==a.bmpSignature&&(0,h.onInvalidFormat)(p.driverBmp.name,n.name),m=new DataView(v.buffer,v.byteOffset),_=m.getUint32(a.bmpFileHeaderSize,!0),[4,n.skip(-4)];case 3:return o.sent(),x=g[_]||"std",[4,n.read(_)];case 4:return P=o.sent(),k=new u.Point,O={colorModel:"Auto",depth:0},R="",S=w.bfSize-w.bfOffBits,"os2"!==x?[3,8]:(B=(0,c.readBmpCoreHeader)(P.buffer,P.byteOffset),M=B.bcBitCount,k.set(B.bcWidth,B.bcHeight),1!==M&&4!==M&&8!==M?[3,6]:(O.colorModel="Indexed",I=O,[4,(0,f.readPalette)(n,1<<M,{})]));case 5:return I.palette=o.sent(),[3,7];case 6:if(24!==M)throw new s.ErrorRI("Unsupported OS/2 bitmap color format (<bpp> bit/pixel)",{bpp:B.bcBitCount});O.colorModel="RGB",o.label=7;case 7:return O.depth=M,r.format=y.bmpOs2,r.compression="None",[3,18];case 8:if(r.format=p.driverBmp.name,z=(0,d.readBmpInfoHeader)(P.buffer,P.byteOffset),b=z.biCompression,k.set(z.biWidth,Math.abs(z.biHeight)),i=z.biHeight<0,1!==z.biPlanes)throw new s.ErrorRI("Unsupported planes count <N> in Windows bitmap",{N:z.biPlanes});return M=z.biBitCount,O.depth=M,1!==M&&4!==M&&8!==M?[3,10]:(j=z.biClrUsed||1<<M,A=O,[4,(0,f.readPalette)(n,j,{dword:"opaque"})]);case 9:return A.palette=o.sent(),O.colorModel="Indexed",[3,17];case 10:return 24!==M?[3,11]:(O.colorModel="RGB",[3,17]);case 11:return 16!==M&&32!==M?[3,16]:(O.colorModel="RGB","v3"!==x?[3,12]:(R="X8B8G8R8",[3,15]));case 12:return 0!==b?[3,13]:(16===z.biBitCount&&(O.depth=15),[3,15]);case 13:return 3!==b?[3,15]:[4,n.read(12)];case 14:F=o.sent(),G=new DataView(F.buffer,F.byteOffset),E=G.getUint32(0,!0),C=G.getUint32(4,!0),U=G.getUint32(8,!0),16===z.biBitCount&&(O.depth=63488===E&&2016===C&&31===U?16:31744===E&&992===C&&31===U?15:24),o.label=15;case 15:return[3,17];case 16:throw new s.ErrorRI("Unsupported color format for Windows bitmap: <N> bit/pixel",{N:O.depth});case 17:switch(D="None",b){case 0:case 3:break;case 1:if(8!==M)throw new s.ErrorRI("RLE8 valid only for 8 bit/pixel images. Real: <bpp>",{bpp:M});D="RLE8";break;case 2:if(4!==M)throw new s.ErrorRI("RLE4 valid only for 16 colors images. Real: <bpp>",{bpp:M});D="RLE4";break;default:throw new s.ErrorRI("Invalid BMP compression method <M>",{M:(0,d.getBmpCompressionName)(z.biCompression)})}r.compression=D,r.resUnit="meter",z.biXPelsPerMeter&&(r.resX=z.biXPelsPerMeter),z.biYPelsPerMeter&&(r.resY=z.biYPelsPerMeter),z.biClrImportant&&(r.importantColors=z.biClrImportant),i&&(r.rowOrder="forward"),o.label=18;case 18:return T={size:k,fmt:R?new l.PixelFormat(R):new l.PixelFormat(O),vars:r},[2,new e(t,T,w.bfOffBits,S,i,b)]}}))}))}))},e.prototype.read=function(e){return i(this,void 0,void 0,(function(){var t,r=this;return o(this,(function(a){return t=this.format.stream,[2,(0,w.streamLock)(t,(function(){return i(r,void 0,void 0,(function(){var r,i,a,s,u;return o(this,(function(o){switch(o.label){case 0:return i=(r=this).info,a=r.isUpDown,[4,t.seek(this.offset)];case 1:return o.sent(),s={converter:e,info:i,isUpDown:a},1!==this.compression&&2!==this.compression?[3,4]:[4,t.read(this.size)];case 2:return u=o.sent(),[4,(0,v.readRleImage)(n({srcData:u},s))];case 3:return o.sent(),[3,6];case 4:return[4,(0,b.readUncompressedImage)(n({stream:t},s))];case 5:o.sent(),o.label=6;case 6:return[2]}}))}))}))]}))}))},e}();t.FrameBmp=m},4263:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bmpOs2=t.bmpWindows=void 0,t.bmpWindows="Windows bitmap",t.bmpOs2="OS/2 bitmap"},4745:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compatibleBmpPixelFormat=void 0;var n=r(5530),i=r(8643);t.compatibleBmpPixelFormat=function(e){if("Indexed"===e.colorModel)return e;if("Gray"===e.colorModel){var t=Math.min(e.depth,8);return new n.PixelFormat({colorModel:"Indexed",depth:t,palette:(0,i.createGrayPalette)(1<<t)})}return"RGB"!==e.colorModel||e.depth>32?new n.PixelFormat(e.alpha?32:24):new n.PixelFormat(e.depth)}},8864:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.driverBmp=void 0;var o=r(1829),a=r(4263),s=r(2068);t.driverBmp={name:a.bmpWindows,shortName:"BMP",extensions:["bmp","dib","rle"],props:new Set,detect:function(e){return n(void 0,void 0,void 0,(function(){var t;return i(this,(function(r){switch(r.label){case 0:return[4,e.getSize()];case 1:return r.sent()<2?[2,!1]:[4,e.seek(0)];case 2:return r.sent(),[4,e.read(2)];case 3:return[2,66===(t=r.sent())[0]&&77===t[1]]}}))}))},createFormat:function(e){return o.FormatBmp.create(e)},save:function(e,t,r,n){return(0,s.saveBmpFormat)(e,t,r,n)}}},2040:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.readUncompressedImage=void 0;var o=r(6697),a=r(4490),s=r(3200),u=r(4704);t.readUncompressedImage=function(e){return n(void 0,void 0,void 0,(function(){var t,r,c,l,f,d,h,p,b,v,y;return i(this,(function(w){switch(w.label){case 0:return t=e.stream,r=e.converter,c=e.info,l=e.isUpDown,f=(0,a.getSizeAndDepth)(c),d=f.width,h=f.depth,p=(0,o.calcPitch)(d,h),b=(0,o.calcPitch)(d,h,4),v=b-p,y=function(e){return n(void 0,void 0,void 0,(function(){return i(this,(function(r){switch(r.label){case 0:return[4,t.readBuffer(e,p)];case 1:return r.sent(),v?[4,t.skip(v)]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))},[4,(0,u.readImage)(r,c,y,(0,s.stdRowOrder)(l?"forward":"backward"))];case 1:return w.sent(),[2]}}))}))}},8781:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.readRleImage=void 0;var o=r(4704),a=r(447),s=r(2941),u=r(9703),c=r(3200),l={4:u.unpackRle4,8:s.unpackRle8};t.readRleImage=function(e){return n(void 0,void 0,void 0,(function(){var t,r,s,u,f,d,h,p,b;return i(this,(function(v){switch(v.label){case 0:if(t=e.srcData,r=e.converter,s=e.info,u=e.isUpDown,f=s.fmt.depth,!(d=l[f]))throw new a.ErrorRI("Invalid RLE method for <depth> bit/pixel",{depth:f});return h={x:0,y:0,res:0},p=0,b=function(e){return n(void 0,void 0,void 0,(function(){return i(this,(function(r){return e.fill(0),1!==h.res&&(h.y>1?h.y--:p=d(t,p,e,h)),[2]}))}))},[4,(0,o.readImage)(r,s,b,(0,c.stdRowOrder)(u?"forward":"backward"))];case 1:return v.sent(),[2]}}))}))}},9703:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unpackRle4=void 0,t.unpackRle4=function(e,t,r,n){for(var i=n.x,o=0,a=t;;)if(o=e[a++])for(var s=(d=e[a++])>>4,u=15&d,c=0;c<o;c++){var l=i>>1;0==(1&i)?r[l]=s<<4:r[l]|=s,i++,d=s,s=u,u=d}else{if((o=e[a++])<3){n.res=o,2===o?(n.x=e[a++],n.y=e[a++]):(n.x=0,n.y=0);break}var f=a;for(c=0;c<o;c++){var d=0==(1&c)?e[f]>>4:15&e[f++],h=i>>1;0==(1&i)?r[h]=d<<4:r[h]|=d,i++}a+=(o+1)/2+1&-2}return a}},2941:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unpackRle8=void 0;var n=r(1215);t.unpackRle8=function(e,t,r,i){for(var o=i.x,a=0,s=t;;)if(a=e[s++]){var u=e[s++];r.fill(u,o,o+a),o+=a}else{if(2===(a=e[s++])?(i.x=e[s++],i.y=e[s++]):(i.x=0,i.y=0),a<3)break;var c=a+1&-2;(0,n.copyBytes)(a,e,s,r,o),s+=c,o+=a}return i.res=a,s}},6838:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeOptionsSaveBmp=void 0;var n=r(6279),i=r(4263);t.makeOptionsSaveBmp=function(e){if(e){var t={};e.format===i.bmpOs2&&(t.os2=!0),"forward"!==e.rowOrder&&"backward"!==e.rowOrder||(t.rowOrder=e.rowOrder);var r=(0,n.getVarNumber)(e.importantColors,0);r&&(t.importantColors=r);var o=(0,n.getVarNumber)(e.resX,0);o&&(t.resX=o);var a=(0,n.getVarNumber)(e.resY,0);return a&&(t.resY=a),e.resUnit&&(t.resUnit=e.resUnit),t}}},2068:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(6838),t),i(r(1927),t),i(r(5535),t),i(r(4010),t)},1927:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.saveBmp=void 0;var o=r(4704),a=r(3200),s=r(6697),u=r(3748),c=r(8643),l=r(4897),f=r(601),d=r(447),h=r(9682),p=r(5074),b=r(8695);t.saveBmp=function(e,t,r,y){return n(void 0,void 0,void 0,(function(){var w,g,m,_,x,P,k,O;return i(this,(function(R){switch(R.label){case 0:if(w=e.dstInfo,g=w.size,m=w.fmt,_=m.colorModel,x=m.depth,P=m.palette,"RGB"!==_&&"Indexed"!==_)throw new d.ErrorRI("Wrong BMP image color model: <colm>",{colm:_});return k=function(){return new d.ErrorRI("Indexed image without a palette")},O=null==r?void 0:r.os2,[4,(0,f.streamLock)(t,(function(){return n(void 0,void 0,void 0,(function(){var f,w,R,S,B,I,z,M,j,A,F,G,E,C,U,D,T,N,L,H,Z,V,W,q,X;return i(this,(function(Y){switch(Y.label){case 0:return[4,t.seek(0)];case 1:return Y.sent(),f=new Uint8Array(p.bmpFileHeaderSize),w={bfSize:0,bfOffBits:0},(0,p.writeBmpFileHeader)(w,f.buffer,f.byteOffset),[4,t.write(f,f.byteLength)];case 2:if(Y.sent(),R=!1,!O)return[3,6];if(![1,4,8,24].includes(x))throw new d.ErrorRI("Unsupported OS/2 bitmap color depth: <depth> bit/pixel",{depth:x});return S=new Uint8Array(h.bmpCoreHeaderSize),B={bcSize:S.byteLength,bcWidth:g.x,bcHeight:g.y,bcPlanes:1,bcBitCount:x},(0,h.writeBmpCoreHeader)(B,S.buffer,S.byteOffset),[4,t.write(S)];case 3:if(Y.sent(),"Indexed"!==_)return[3,5];if(!P)throw k();if(A=1<<x,P.length>A)throw new d.ErrorRI("The number of colors in the palette (<col>) exceeds the limit (<lim>)",{col:P.length,lim:A});return I={},z=new Uint8Array((0,l.calcPaletteSize)(A,I)),(0,c.writePaletteToBuf)(P,z,I),[4,t.write(z,z.byteLength)];case 4:Y.sent(),Y.label=5;case 5:return[3,11];case 6:return M=new Uint8Array(b.bmpInfoHeaderSize),j=m.depthAligned,A=(null==P?void 0:P.length)||0,R="forward"===(null==r?void 0:r.rowOrder),F={biSize:M.byteLength,biPlanes:1,biWidth:g.x,biHeight:R?-g.y:g.y,biBitCount:j,biCompression:16===x||32===j?3:0,biClrUsed:A,biClrImportant:null!==(V=null==r?void 0:r.importantColors)&&void 0!==V?V:0,biSizeImage:0,biXPelsPerMeter:0,biYPelsPerMeter:0},G=null!==(W=null==r?void 0:r.resX)&&void 0!==W?W:0,E=null!==(q=null==r?void 0:r.resY)&&void 0!==q?q:0,G&&E&&(C=null!==(X=null==r?void 0:r.resUnit)&&void 0!==X?X:"meter",F.biXPelsPerMeter=Math.round((0,u.resolutionToMeters)(G,C)),F.biYPelsPerMeter=Math.round((0,u.resolutionToMeters)(E,C))),(0,b.writeBmpInfoHeader)(F,M.buffer,M.byteOffset),[4,t.write(M,M.byteLength)];case 7:if(Y.sent(),"Indexed"!==_)return[3,9];if(!P)throw k();return[4,(0,c.writePalette)(P,t,{dword:!0})];case 8:return Y.sent(),[3,11];case 9:return 3!==F.biCompression?[3,11]:[4,t.write(v(m))];case 10:Y.sent(),Y.label=11;case 11:return U=w,[4,t.getPos()];case 12:return U.bfOffBits=Y.sent(),D=(0,s.calcPitch)(g.x,x),T=(0,s.calcPitch)(g.x,x,4),L=(N=T-D)?new Uint8Array(N):void 0,H=function(e){return n(void 0,void 0,void 0,(function(){return i(this,(function(r){switch(r.label){case 0:return[4,t.write(e,D)];case 1:return r.sent(),L?[4,t.write(L)]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))},[4,(0,o.writeImage)(e,H,{progress:y,rowOrder:(0,a.stdRowOrder)(R?"forward":"backward")})];case 13:return Y.sent(),Z=w,[4,t.getPos()];case 14:return Z.bfSize=Y.sent(),t.seek(0),(0,p.writeBmpFileHeader)(w,f.buffer,f.byteOffset),[4,t.write(f)];case 15:return Y.sent(),[2]}}))}))}))];case 1:return R.sent(),[2]}}))}))};var v=function(e){var t=new Uint8Array(12),r=new DataView(t.buffer),n=e.sampleBitMasks,i=e.samples;return["R","G","B"].forEach((function(e,t){var o=i.findIndex((function(t){return t.sign===e}));if(o<0)throw new d.ErrorRI("Not found <sign> sample",{sign:e});r.setUint32(4*t,Number(n[o]),!0)})),t}},4010:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)},i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.saveBmpFormat=void 0;var a=r(447),s=r(5535),u=r(6838);t.saveBmpFormat=function(e,t,r,c){return i(void 0,void 0,void 0,(function(){var i,l,f;return o(this,(function(o){switch(o.label){case 0:if(1!==(i=e.frames).length)throw new a.ErrorRI("Can't write <fmt> file with <n> frames",{fmt:"BMP",n:i.length});return[4,(l=i[0]).getImage()];case 1:return f=o.sent(),[2,(0,s.saveBmpImage)(f,t,n(n({},(0,u.makeOptionsSaveBmp)(l.info.vars)),{dstPixFmt:r}),c)]}}))}))}},5535:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},o=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};Object.defineProperty(t,"__esModule",{value:!0}),t.saveBmpImage=void 0;var a=r(4704),s=r(4745),u=r(1927);t.saveBmpImage=function(e,t,r,c){return n(void 0,void 0,void 0,(function(){var n,l,f,d,h;return i(this,(function(i){switch(i.label){case 0:return l=(n=r||{}).dstPixFmt,f=o(n,["dstPixFmt"]),d=(0,s.compatibleBmpPixelFormat)(null!=l?l:e.info.fmt),[4,(0,a.createRowsReader)(e,d,c)];case 1:return h=i.sent(),[4,(0,u.saveBmp)(h,t,f,null==c?void 0:c.progress)];case 2:return i.sent(),[2]}}))}))}},772:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createFormatByName=void 0;var n=r(447),i=r(3948);t.createFormatByName=function(e){var t,r=((null===(t=/\.([a-z\d]+)$/i.exec(e.name))||void 0===t?void 0:t[1])||"").toLowerCase(),o=i.driversList.find((function(e){return e.extensions.includes(r)}));if(!o)throw new n.ErrorRI("Driver not found for <name>",{name:e.name});return o.createFormat(e)}},3948:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.driversList=void 0;var n=r(8864),i=r(4002),o=r(9211),a=r(3637);t.driversList=Object.freeze([n.driverBmp,i.driverGif,o.driverPng,a.driverPnm])},7639:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.FormatGif=t.ExtLabel=t.ChunkCode=void 0;var o,a,s=r(6795),u=r(601),c=r(185),l=r(6522),f=r(2627),d=r(6093),h=r(1098),p=r(6449),b=r(4653);!function(e){e[e.beginOfImage=44]="beginOfImage",e[e.endOfStream=59]="endOfStream",e[e.extensionIntroducer=33]="extensionIntroducer"}(o||(t.ChunkCode=o={})),function(e){e[e.graphicControl=249]="graphicControl",e[e.comment=254]="comment",e[e.application=255]="application"}(a||(t.ExtLabel=a={}));var v=function(){function e(e){this.stream=e,this.frames=[],this.vars={},this.screen=new f.GifLogicalScreen}return e.create=function(t){var r=this;return(0,u.streamLock)(t,(function(){return n(r,void 0,void 0,(function(){var r,n,v,y,w,g,m,_,x,P,k,O,R,S,B;return i(this,(function(i){switch(i.label){case 0:return r=new e(t),[4,t.seek(0)];case 1:return i.sent(),[4,t.read(3)];case 2:return n=i.sent(),"GIF"!==(0,s.textFromBuffer)(n)&&(0,c.onInvalidFormat)("GIF",t.name),y=s.textFromBuffer,[4,t.read(3)];case 3:return"87a"!==(v=y.apply(void 0,[i.sent()]))&&"89a"!==v&&(0,l.onInvalidVersion)(v,"GIF",t),w=r,[4,f.GifLogicalScreen.read(t)];case 4:return w.screen=i.sent(),r.screen.isGlobalTable?(g=r.screen.tableSize,m=r,[4,(0,d.readPalette)(t,g,{rgb:!0})]):[3,6];case 5:m.palette=i.sent(),i.label=6;case 6:return[4,t.getSize()];case 7:_=i.sent(),i.label=8;case 8:return[4,t.getPos()];case 9:return i.sent()>=_?[3,24]:[4,(0,u.readByte)(t)];case 10:return(k=i.sent())===o.endOfStream?[3,24]:k!==o.beginOfImage?[3,12]:[4,p.FrameGif.create(r,x)];case 11:return O=i.sent(),r.frames.push(O),x=void 0,[3,23];case 12:return k!==o.extensionIntroducer?[3,20]:[4,(0,u.readByte)(t)];case 13:return(R=i.sent())!==a.graphicControl?[3,15]:[4,(0,b.readGraphicControlExtension)(t)];case 14:return x=i.sent(),[3,19];case 15:return R!==a.comment?[3,17]:[4,(0,h.readGifDataAsText)(t)];case 16:return S=i.sent(),P=P||S,[3,19];case 17:return[4,(0,h.skipGifData)(t)];case 18:i.sent(),i.label=19;case 19:return[3,23];case 20:return[4,t.skip(1)];case 21:return i.sent(),[4,(0,h.skipGifData)(t)];case 22:i.sent(),i.label=23;case 23:return[3,8];case 24:return P&&(null===(B=r.frames[0])||void 0===B?void 0:B.info.vars)&&(r.frames[0].info.vars.comment=P),[2,r]}}))}))}))},e}();t.FormatGif=v},6449:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.FrameGif=void 0;var o=r(6093),a=r(7716),s=r(26),u=r(8011),c=r(447),l=r(601),f=r(3200),d=r(4035),h=r(1098),p=r(3819),b=r(4704),v=function(){function e(e,t,r,n,i,o){this.format=e,this.info=t,this.offset=r,this.size=n,this.descriptor=i,this.graphicControlExtension=o,this.type="frame"}return e.create=function(t,r){return n(this,void 0,void 0,(function(){var n,l,f,d,p,b,v,y,w,g,m,_,x,P,k;return i(this,(function(i){switch(i.label){case 0:return n=t.stream,l=t.frames,f=l.length,[4,(0,s.readGifImageDescriptor)(n)];case 1:return d=i.sent(),p=d.left,b=d.top,v=d.width,y=d.height,w=d.flags,g=(0,u.calcGifTableSize)(w&s.GifImgDescFlags.tableSize),0==(w&s.GifImgDescFlags.localTable)?[3,3]:[4,(0,o.readPalette)(n,g,{rgb:!0})];case 2:return _=i.sent(),[3,4];case 3:_=t.palette,i.label=4;case 4:if(!(m=_))throw new c.ErrorRI("Color table is not defined for frame #<n> of <src>",{n:f+1,src:n.name});return[4,n.getPos()];case 5:return x=i.sent(),(P=(0,a.createInfo)(v,y,8,"Indexed",!1,m)).vars={orgX:p,orgY:b},(0,s.gifInterlaced)(w)&&(P.vars.interlaced=1),[4,n.skip(1)];case 6:return i.sent(),[4,(0,h.skipGifData)(n)];case 7:return i.sent(),[4,n.getPos()];case 8:return k=i.sent(),[2,new e(t,P,x,k-x,d,r)]}}))}))},Object.defineProperty(e.prototype,"interleased",{get:function(){return(0,s.gifInterlaced)(this.descriptor.flags)},enumerable:!1,configurable:!0}),e.prototype.read=function(e){return n(this,void 0,void 0,(function(){var t=this;return i(this,(function(r){switch(r.label){case 0:return[4,(0,l.streamLock)(this.format.stream,(function(r){return n(t,void 0,void 0,(function(){var t,n,o,a,s;return i(this,(function(i){switch(i.label){case 0:return t=this.descriptor.width,n=this.interleased,o=n?d.gifRowOrderInterlaced:f.rowOrderForward,[4,r.seek(this.offset)];case 1:return i.sent(),[4,(0,l.readByte)(r)];case 2:return a=i.sent(),s=new p.LzwUnpacker(r,a),[4,(0,b.readImage)(e,this.info,(function(e){return s.readLine(e,t)}),o)];case 3:return i.sent(),[2]}}))}))}))];case 1:return r.sent(),[2]}}))}))},e}();t.FrameGif=v},26:function(e,t){"use strict";var r,n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.gifInterlaced=t.readGifImageDescriptor=t.imageDescriptorFromBuffer=t.GifImgDescFlags=void 0,function(e){e[e.localTable=128]="localTable",e[e.interlace=64]="interlace",e[e.sort=32]="sort",e[e.tableSize=7]="tableSize"}(r||(t.GifImgDescFlags=r={})),t.imageDescriptorFromBuffer=function(e){var t=new DataView(e.buffer,e.byteOffset);return{left:t.getUint16(0,!0),top:t.getUint16(2,!0),width:t.getUint16(4,!0),height:t.getUint16(6,!0),flags:t.getUint8(8)}},t.readGifImageDescriptor=function(e){return n(void 0,void 0,void 0,(function(){var r;return i(this,(function(n){switch(n.label){case 0:return r=t.imageDescriptorFromBuffer,[4,e.read(9)];case 1:return[2,r.apply(void 0,[n.sent()])]}}))}))},t.gifInterlaced=function(e){return 0!=(e&r.interlace)}},2627:function(e,t){"use strict";var r=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},n=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.GifLogicalScreen=t.sizeOfDescriptor=void 0,t.sizeOfDescriptor=7;var i=function(){function e(){this.width=0,this.height=0,this.flags=0,this.bgIndex=0,this.aspectRatio=0}return Object.defineProperty(e.prototype,"isGlobalTable",{get:function(){return 0!=(128&this.flags)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isSortedTable",{get:function(){return 0!=(8&this.flags)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"colorResolution",{get:function(){return 1+((112&this.flags)>>4)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tableSize",{get:function(){return 1<<1+(7&this.flags)},enumerable:!1,configurable:!0}),e.prototype.getBgIndex=function(){return this.isGlobalTable?this.bgIndex:void 0},e.prototype.getAspectRatio=function(){return 0===this.aspectRatio?void 0:(this.aspectRatio+15)/64},e.prototype.readFromBuf=function(e){var t=new DataView(e.buffer,e.byteOffset);this.width=t.getUint16(0,!0),this.height=t.getUint16(2,!0),this.flags=t.getInt8(4),this.bgIndex=t.getUint8(5),this.aspectRatio=t.getUint8(6)},e.read=function(i){return r(this,void 0,void 0,(function(){var r,o,a;return n(this,(function(n){switch(n.label){case 0:return r=new e,a=(o=r).readFromBuf,[4,i.read(t.sizeOfDescriptor)];case 1:return a.apply(o,[n.sent()]),[2,r]}}))}))},e.prototype.writeToBuf=function(){var e=new Uint8Array(t.sizeOfDescriptor),r=new DataView(e.buffer,e.byteOffset);return r.setUint16(0,this.width,!0),r.setUint16(2,this.height,!0),e[4]=this.flags,e[5]=this.bgIndex,e[6]=this.aspectRatio,e},e.prototype.write=function(e){return r(this,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return[4,e.write(this.writeToBuf())];case 1:return t.sent(),[2]}}))}))},e.nearestValidPaletteProps=function(e){for(var t=1,r=e-1,n=0;n<=8;n++,r>>=1)1&r&&(t=n);return{code:t,size:1<<t+1}},e}();t.GifLogicalScreen=i},4653:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.readGraphicControlExtension=t.DisposalMethod=void 0;var o,a=r(601),s=r(1098);!function(e){e[e.notUsed=0]="notUsed",e[e.notDispose=1]="notDispose",e[e.bgColor=2]="bgColor",e[e.previous=3]="previous"}(o||(t.DisposalMethod=o={})),t.readGraphicControlExtension=function(e){return n(void 0,void 0,void 0,(function(){var t,r;return i(this,(function(n){switch(n.label){case 0:return[4,(0,a.readByte)(e)];case 1:return 4===n.sent()?[3,4]:[4,e.skip(-1)];case 2:return n.sent(),[4,(0,s.skipGifData)(e)];case 3:return n.sent(),[2,void 0];case 4:return[4,e.read(5)];case 5:return t=n.sent(),[2,{disposalMethod:(r=t[0])>>2&7,userInput:2==(2&r),delayTime:t[1]+(t[2]<<8),transparentColorIndex:1==(1&r)?t[3]:void 0}]}}))}))}},8011:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calcGifTableSize=void 0,t.calcGifTableSize=function(e){return 1<<e+1}},4002:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.driverGif=void 0;var o=r(447),a=r(7639);t.driverGif={name:"CompuServe GIF",shortName:"GIF",extensions:["gif"],props:new Set,detect:function(e){return n(void 0,void 0,void 0,(function(){var t;return i(this,(function(r){switch(r.label){case 0:return[4,e.getSize()];case 1:return r.sent()<13?[2,!1]:[4,e.seek(0)];case 2:return r.sent(),[4,e.read(3)];case 3:return t=r.sent(),[2,"47 49 46"===(0,o.dump)(t)]}}))}))},createFormat:function(e){return a.FormatGif.create(e)}}},4035:function(e,t){"use strict";var r=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.gifRowOrderInterlaced=void 0;var n=[{start:0,step:8},{start:4,step:8},{start:2,step:4},{start:1,step:2}];t.gifRowOrderInterlaced=function(e){var t,i,o,a,s,u;return r(this,(function(r){switch(r.label){case 0:t=0,i=n,r.label=1;case 1:if(!(t<i.length))return[3,6];o=i[t],a=o.start,s=o.step,u=a,r.label=2;case 2:return u<e?[4,u]:[3,5];case 3:r.sent(),r.label=4;case 4:return u+=s,[3,2];case 5:return t++,[3,1];case 6:return[2]}}))}},3819:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.LzwUnpacker=void 0;var a=r(601),s=r(8011),u=function(){function e(e,t){this.stream=e,this.startCodeSize=t,this.buf=new Uint8Array,this.bufPos=0,this.bFinish=!1,this.bitOffs=0,this.prevCode=0,this.table=[],this.strIndex=0,this.curStr=0,this.curCodeSize=t,this.tableStart=2+(1<<t)}return e.prototype.readLine=function(e,t){return n(this,void 0,void 0,(function(){var r,n,o;return i(this,(function(i){switch(i.label){case 0:r=0,i.label=1;case 1:return!this.bFinish&&r<t?(n=e,o=r++,[4,this.getNextByte()]):[3,3];case 2:return n[o]=i.sent(),[3,1];case 3:return[2]}}))}))},e.prototype.getNextByte=function(){return n(this,void 0,void 0,(function(){var e,t,r,n,a,s,u,c;return i(this,(function(i){switch(i.label){case 0:return this.strIndex>0?(c=this.table[this.curStr],e=c[this.strIndex++],this.strIndex===c.length&&(this.strIndex=0),[2,e]):(t=1<<this.startCodeSize,r=1<<this.startCodeSize,n=r+1,a=this.tableStart,s=this.tableStart+this.table.length,[4,this.readCode()]);case 1:return(u=i.sent())===n?[2,0]:u!==r?[3,3]:(this.initTable(),[4,this.readCode()]);case 2:return(u=i.sent())===n?[2,0]:u>=a?(this.onCorrupted(),[2,0]):(e=255&u,[3,4]);case 3:if(u<s)u<t?e=255&u:(this.curStr=u-a,this.strIndex=1,e=this.table[this.curStr][0]),c=void 0,c=this.prevCode<t?[this.prevCode]:o([],this.table[this.prevCode-a],!0),u<t?c.push(u):c.push(this.table[u-a][0]),this.addStrToTbl(c);else{if(u>s)return this.onCorrupted(),[2,0];c=void 0,c=this.prevCode<t?[this.prevCode]:o([],this.table[this.prevCode-a],!0),e=c[0],c.push(e),this.strIndex=1,this.curStr=this.table.length,this.addStrToTbl(c)}i.label=4;case 4:return this.prevCode=u,[2,e]}}))}))},e.prototype.onCorrupted=function(){this.bFinish=!0},e.prototype.initTable=function(){this.curCodeSize=this.startCodeSize,this.table.length=0,this.strIndex=0},e.prototype.readCode=function(){return n(this,void 0,void 0,(function(){var e,t,r,n,o,a;return i(this,(function(i){switch(i.label){case 0:if(this.bFinish)return[2,0];e=this.curCodeSize+1,t=0,r=this.bitOffs+e,n=r+7>>3,o=0,i.label=1;case 1:return o<n?[4,this.checkBuffer()]:[3,4];case 2:if(!i.sent())return[2,0];a=this.buf[this.bufPos++],t|=a<<(o<<3),i.label=3;case 3:return o++,[3,1];case 4:return t>>=this.bitOffs,t&=(1<<e)-1,this.bitOffs=7&r,0!==this.bitOffs&&this.bufPos--,[2,t]}}))}))},e.prototype.addStrToTbl=function(e){this.table.push(e),this.curCodeSize<11&&this.table.length+this.tableStart===(0,s.calcGifTableSize)(this.curCodeSize)&&this.curCodeSize++},e.prototype.checkBuffer=function(){return n(this,void 0,void 0,(function(){var e,t;return i(this,(function(r){switch(r.label){case 0:return this.bufPos<this.buf.length?[2,!0]:[4,(0,a.readByte)(this.stream)];case 1:return 0===(e=r.sent())?(this.bFinish=!0,[2,!1]):(t=this,[4,this.stream.read(e)]);case 2:return t.buf=r.sent(),this.bufPos=0,[2,!0]}}))}))},e}();t.LzwUnpacker=u},1098:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.readGifDataAsText=t.skipGifData=void 0;var o=r(4044),a=r(601);t.skipGifData=function(e){return n(void 0,void 0,void 0,(function(){var t,r,n;return i(this,(function(i){switch(i.label){case 0:return[4,e.getPos()];case 1:return t=i.sent(),[4,e.getSize()];case 2:r=i.sent(),i.label=3;case 3:return t<r?[4,(0,a.readByte)(e)]:[3,6];case 4:return 0===(n=i.sent())?[3,6]:(t+=n+1,[4,e.seek(t)]);case 5:return i.sent(),[3,3];case 6:return[2]}}))}))},t.readGifDataAsText=function(e){return n(void 0,void 0,void 0,(function(){var t,r,n,s;return i(this,(function(i){switch(i.label){case 0:t=[],i.label=1;case 1:return[4,(0,a.isEndOfStream)(e)];case 2:return i.sent()?[3,5]:[4,(0,a.readByte)(e)];case 3:return 0===(r=i.sent())?[3,5]:(s=(n=t).push,[4,e.read(r)]);case 4:return s.apply(n,[i.sent()]),[3,1];case 5:return[2,(0,o.createCrossBlob)(t).text()]}}))}))}},9250:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(2088),t),i(r(772),t)},185:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onInvalidFormat=void 0;var n=r(447);t.onInvalidFormat=function(e,t){throw new n.ErrorRI("Invalid format <fmt> in <src>",{fmt:e,src:t})}},6522:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onInvalidVersion=void 0;var n=r(447);t.onInvalidVersion=function(e,t,r){throw new n.ErrorRI("Not supported version <ver> for <fmt> format in <src>",{ver:e,fmt:t,src:r.name})}},2757:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.FormatPng=void 0;var o=r(3399),a=function(){function e(e){this.stream=e,this.vars={},this.frames=[]}return e.create=function(t){return n(this,void 0,void 0,(function(){var r,n;return i(this,(function(i){switch(i.label){case 0:return r=new e(t),[4,o.FramePng.create(r)];case 1:return n=i.sent(),r.frames=[n],[2,r]}}))}))},e}();t.FormatPng=a},3399:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)},i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.FramePng=void 0;var s=a(r(2845)),u=r(4704),c=r(601),l=r(5748),f=r(1621),d=r(447),h=r(5655),p=r(6093),b=r(5530),v=r(6697),y=r(1215),w=r(7172),g=r(8450),m=r(6787),_=r(8382),x=r(1562),P=r(9846),k=r(4902),O=function(){function e(e,t,r,n){this.format=e,this.info=t,this.offset=r,this.chunks=n,this.type="image"}return e.create=function(t){return i(this,void 0,void 0,(function(){var r=this;return o(this,(function(a){return[2,(0,c.streamLock)(t.stream,(function(a){return i(r,void 0,void 0,(function(){var r,s,u,v,y,w,g,m,_=this;return o(this,(function(O){switch(O.label){case 0:return[4,(0,f.checkPngSignature)(a)];case 1:if(!O.sent())throw new d.ErrorRI("Not PNG file");r=[],u=0,v="",y=function(e){return i(_,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,a.seek(e.nextChunkPosition)];case 1:return t.sent(),[2]}}))}))},w={IHDR:function(e){return i(_,void 0,void 0,(function(){var t;return o(this,(function(r){switch(r.label){case 0:return[4,(0,l.readPngChunkDataOnly)(a,e)];case 1:return t=r.sent(),s=(0,h.readPngHeader)(t),[2]}}))}))},PLTE:function(e){return i(_,void 0,void 0,(function(){var t,r;return o(this,(function(n){switch(n.label){case 0:return[4,(0,l.readPngChunkDataOnly)(a,e)];case 1:return t=n.sent(),r=(0,p.readPaletteFromBuf)(t,t.byteLength/3,{rgb:!0}),null==s||s.fmt.setPalette(r),[2]}}))}))},tRNS:function(e){return i(_,void 0,void 0,(function(){var t,r,i,u,c;return o(this,(function(o){switch(o.label){case 0:return[4,(0,l.readPngChunkDataOnly)(a,e)];case 1:return t=o.sent(),r=null==s?void 0:s.fmt.def,(null===(c=null==r?void 0:r.palette)||void 0===c?void 0:c.length)===t.length&&"Indexed"===r.colorModel&&(i=(0,P.buildTransparentPalette)(r.palette,t),"alpha"===(u=(0,k.analyzePaletteTransparency)(i)).type?s.fmt=new b.PixelFormat(n(n({},r),{alpha:!0,palette:i})):"transparency"===u.type&&(s.vars.transparency=u.index,s.fmt.setPalette(i))),[2]}}))}))},IDAT:function(e){return i(_,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return u=u||e.dataPosition-8,[4,y(e)];case 1:return t.sent(),[2]}}))}))},tEXt:function(e){return i(_,void 0,void 0,(function(){var t,r;return o(this,(function(n){switch(n.label){case 0:return[4,(0,l.readPngChunkDataOnly)(a,e)];case 1:return t=n.sent(),"Comment"===(r=(0,x.readPngText)(t)).keyword&&(v=r.text),[2]}}))}))},iTXt:function(e){return i(_,void 0,void 0,(function(){var t,r;return o(this,(function(n){switch(n.label){case 0:return[4,(0,l.readPngChunkDataOnly)(a,e)];case 1:return t=n.sent(),"Comment"===(r=(0,x.readPngInternationalText)(t)).keyword&&(v=r.text),[2]}}))}))}},O.label=2;case 2:return[4,(0,c.isEndOfStream)(a)];case 3:return O.sent()?[3,6]:[4,(0,l.readPngChunkRef)(a)];case 4:return g=O.sent(),r.push(g),"IEND"===g.type?[3,6]:[4,(null!==(m=w[g.type])&&void 0!==m?m:y)(g)];case 5:return O.sent(),[3,2];case 6:if(!s)throw new d.ErrorRI("Expected IHDR chunk");if(!u)throw new d.ErrorRI("Expected IDAT chunk");return v&&(s.vars=s.vars||{},s.vars.comment=v),[2,new e(t,s,u,r)]}}))}))}))]}))}))},e.prototype.read=function(e){return i(this,void 0,void 0,(function(){var t=this;return o(this,(function(r){switch(r.label){case 0:return[4,(0,c.streamLock)(this.format.stream,(function(r){return i(t,void 0,void 0,(function(){var t,n,a,c,f,h,p,b,x,P,k,O,z,M,j,A,F,G,E,C,U,D,T,N,L,H,Z,V,W,q,X=this;return o(this,(function(Y){switch(Y.label){case 0:return t=this.info,n=16===(null===(W=t.fmt.samples[0])||void 0===W?void 0:W.length),[4,r.seek(this.offset)];case 1:Y.sent(),a=new s.default.Inflate,Y.label=2;case 2:return[4,(0,l.readPngChunkRef)(r)];case 3:return"IDAT"!==(c=Y.sent()).type?[3,6]:[4,(0,l.readPngChunkDataOnly)(r,c)];case 4:f=Y.sent(),a.push(f),Y.label=5;case 5:return[3,2];case 6:if("string"==typeof(h=a.result))throw new d.ErrorRI("Corrupted data");return p=0,b=t.size,x=b.x,P=b.y,k=(0,v.calcPitch)(x,t.fmt.depth),O=(0,v.calcPitch)(1,t.fmt.depth),z=new _.PngRowFiltrator(O,k),(null===(q=t.vars)||void 0===q?void 0:q.interlaced)?[3,8]:[4,(0,u.readImage)(e,t,(function(e){return i(X,void 0,void 0,(function(){var t,r,i,a;return o(this,(function(o){return t=h[p++],r=z.unfilterRow(t,h,p,k),i=r[0],a=r[1],n?(0,m.copyWordsFromBigEndian)(k>>1,i.buffer,i.byteOffset+a,e.buffer,e.byteOffset):(0,y.copyBytes)(k,i,a,e,0),z.next(),p+=k,[2]}))}))}))];case 7:return Y.sent(),[3,10];case 8:for(M=new g.SurfaceStd(t),j=0;j<7;j++)if(A=I[j],0!==(F=Math.floor((x-S[j]+A-1)/A)))for(G=(0,v.calcPitch)(F,t.fmt.depth),E=R[j];E<P;E+=B[j]){for(C=h[p++],U=z.unfilterRow(C,h,p,G),D=U[0],T=U[1],N=M.getRowBuffer(E),L={src:D,srcOffset:T,dst:N},H=(0,w.createPixelFiller)(t.fmt),Z=0,V=S[j];V<x;V+=A)H(L,Z++,V);p+=G,z.next()}return[4,(0,u.readImage)(e,t,(function(e,t){return i(X,void 0,void 0,(function(){var r;return o(this,(function(i){return r=M.getRowBuffer(t),n?(0,m.copyWordsFromBigEndian)(M.rowSize/2,r.buffer,r.byteOffset,e.buffer,e.byteOffset):(0,y.copyBytes)(M.rowSize,r,0,e,0),[2]}))}))}))];case 9:Y.sent(),Y.label=10;case 10:return[2]}}))}))}))];case 1:return r.sent(),[2]}}))}))},e}();t.FramePng=O;var R=[0,0,4,0,2,0,1],S=[0,4,0,2,0,1,0],B=[8,8,8,4,4,2,2],I=[8,8,4,4,2,2,1]},5748:function(e,t){"use strict";var r=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},n=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.readPngChunkDataOnly=t.readPngChunkRest=t.readPngChunkRef=t.getCrcPosition=void 0,t.getCrcPosition=function(e){return e.nextChunkPosition-4},t.readPngChunkRef=function(e){return r(void 0,void 0,void 0,(function(){var t,r,i,o,a;return n(this,(function(n){switch(n.label){case 0:return[4,e.read(8)];case 1:return t=n.sent(),r=new DataView(t.buffer,t.byteOffset),i=Array.from(t.slice(4)).map((function(e){return String.fromCharCode(e)})).join(""),o=r.getUint32(0,!1),[4,e.getPos()];case 2:return a=n.sent(),[2,{type:i,length:o,dataPosition:a,nextChunkPosition:a+o+4}]}}))}))},t.readPngChunkRest=function(e,t,i){return r(void 0,void 0,void 0,(function(){var r,o,a,s;return n(this,(function(n){switch(n.label){case 0:return i?[4,e.seek(t.dataPosition)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[4,e.read(t.length)];case 3:return r=n.sent(),[4,e.read(4)];case 4:return o=n.sent(),a=new DataView(o.buffer,o.byteOffset,4),s=a.getUint32(0,!1),[2,[r,s]]}}))}))},t.readPngChunkDataOnly=function(e,t){return r(void 0,void 0,void 0,(function(){var r;return n(this,(function(n){switch(n.label){case 0:return[4,e.read(t.length)];case 1:return r=n.sent(),[4,e.skip(4)];case 2:return n.sent(),[2,r]}}))}))}},6112:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPngFilterByValue=t.pngFilters=void 0;var n=r(447);t.pngFilters=[{value:0,name:"None"},{value:1,name:"Sub",unfilter:function(e){for(var t=e.lineSize,r=e.pixelSize,n=e.buf,i=e.pos,o=r;o<t;o++)n[o+i]+=n[o+i-r]}},{value:2,name:"Up",unfilter:function(e){for(var t=e.pixelSize,r=e.lineSize,n=e.buf,i=e.pos,o=e.prevLine,a=e.prevPos,s=t;s<r;s++)n[s+i]+=o[s+a]}},{value:3,name:"Average",unfilter:function(e){for(var t=e.pixelSize,r=e.lineSize,n=e.buf,i=e.pos,o=e.prevLine,a=e.prevPos,s=t;s<r;s++)n[s+i]+=o[s+a]+n[s+i-t]>>1}},{value:4,name:"Paeth",unfilter:function(e){for(var t,r,n,i,o,a,s,u=e.pixelSize,c=e.lineSize,l=e.buf,f=e.pos,d=e.prevLine,h=e.prevPos,p=u;p<c;p++)l[p+f]+=(void 0,void 0,void 0,void 0,i=(t=l[p+f-u])+(r=d[p+h])-(n=d[p+h-u]),o=Math.abs(i-t),a=Math.abs(i-r),s=Math.abs(i-n),o<=a&&o<=s?t:a<=s?r:n)}}],t.getPngFilterByValue=function(e){var r=t.pngFilters[e];if(!r)throw new n.ErrorRI("Unknown PNG filter: <n>",{n:e});return r}},8382:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PngRowFiltrator=void 0;var n=r(1215),i=r(6112),o=function(){function e(e,t){this.pixelSize=e,this.lineSize=t,this.curBufIndex=0,this.buffs=[new Uint8Array(e+t),new Uint8Array(e+t)]}return e.prototype.unfilterRow=function(e,t,r,o){var a=this,s=a.pixelSize,u=a.buffs,c=a.curBufIndex,l=(0,i.getPngFilterByValue)(e).unfilter,f=u[c];return(0,n.copyBytes)(o,t,r,f,s),null==l||l({pixelSize:s,lineSize:o+s,buf:f,pos:0,prevLine:u[1^c],prevPos:0}),[f,s]},e.prototype.next=function(){this.curBufIndex^=1},e}();t.PngRowFiltrator=o},1621:function(e,t){"use strict";var r=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},n=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.checkPngSignature=void 0;var i=[137,80,78,71,13,10,26,10];t.checkPngSignature=function(e){return r(void 0,void 0,void 0,(function(){var t,r,o;return n(this,(function(n){switch(n.label){case 0:return[4,e.getSize()];case 1:return t=n.sent(),r=i.length,t<r?[2,!1]:[4,e.seek(0)];case 2:return n.sent(),[4,e.read(r)];case 3:return o=n.sent(),[2,i.every((function(e,t){return e===o[t]}))]}}))}))}},5655:(e,t,r)=>{"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.readPngHeader=void 0;var o,a=r(5530),s=r(4485),u=r(447);!function(e){e[e.grayscale=0]="grayscale",e[e.truecolor=2]="truecolor",e[e.indexed=3]="indexed",e[e.grayscaleAlpha=4]="grayscaleAlpha",e[e.truecolorAlpha=6]="truecolorAlpha"}(o||(o={}));var c=((n={})[o.grayscale]=function(e){return"G".concat(e)},n[o.truecolor]=function(e){return"R".concat(e,"G").concat(e,"B").concat(e)},n[o.indexed]=function(e){return"I".concat(e)},n[o.grayscaleAlpha]=function(e){return"G".concat(e,"A").concat(e)},n[o.truecolorAlpha]=function(e){return"R".concat(e,"G").concat(e,"B").concat(e,"A").concat(e)},n),l=((i={})[o.grayscale]="Greyscale",i[o.truecolor]="Truecolour",i[o.indexed]="Indexed-colour",i[o.grayscaleAlpha]="Greyscale with alpha",i[o.truecolorAlpha]="Truecolour with alpha",i);t.readPngHeader=function(e){var t;if(13!==e.byteLength)throw new u.ErrorRI("Invalid PNG header size");var r=new DataView(e.buffer,e.byteOffset),n=r.getUint32(0,!1),i=r.getUint32(4,!1),o=e[8],f=e[9],d=e[12],h=new s.Point(n,i),p=c[f];if(!p){var b=null!==(t=l[f])&&void 0!==t?t:"#".concat(f);throw new u.ErrorRI("Invalid pixel format. Color type: <ct>, Bit depth: <depth>",{depth:o,ct:b})}var v=p(o);return{size:h,fmt:new a.PixelFormat(v),vars:{interlaced:d}}}},1562:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.readPngZipText=t.readPngInternationalText=t.readPngText=void 0;var i=n(r(2845)),o=r(447),a=function(e,t){for(var r=t,n="",i=e.length;r<i;){var o=e[r++];if(0===o)break;n+=String.fromCharCode(o)}return[n,r]},s=function(e,t){for(var r="",n=t,i=e.length;n<i&&e[n];)n++;if(n>t){var a=new Uint8Array(e.buffer,e.byteOffset+t,n-t);r=(0,o.bytesToUtf8)(a)}return n<i&&n++,[r,n]};t.readPngText=function(e){var t=a(e,0),r=t[0],n=t[1],i=new Uint8Array(e.buffer,e.byteOffset+n);return{keyword:r,text:a(i,0)[0]}},t.readPngInternationalText=function(e){var t=a(e,0),r=t[0],n=t[1],i=e[n],o=a(e,n+2),u=o[0],c=o[1],l=s(e,c),f=l[0],d=l[1];return{keyword:r,language:u,compressionFlag:i,translatedKeyword:f,text:s(e,d)[0]}},t.readPngZipText=function(e){var t=a(e,0),r=t[0],n=t[1],o=new i.default.Inflate;o.push(new Uint8Array(e.buffer,e.byteOffset+n+1));var u=o.result;return{keyword:r,text:"string"==typeof u?u:s(u,0)[0]}}},9846:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildTransparentPalette=void 0,t.buildTransparentPalette=function(e,t){return e.length!==t.length?e:e.map((function(e,r){return[e[0],e[1],e[2],t[r]]}))}},9211:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.driverPng=void 0;var n=r(2757),i=r(1621);t.driverPng={name:"Portable Network Graphics (PNG)",shortName:"PNG",extensions:["png"],props:new Set,detect:function(e){return(0,i.checkPngSignature)(e)},createFormat:function(e){return n.FormatPng.create(e)}}},585:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.FormatPnm=void 0;var o=r(7205),a=function(){function e(e){this.stream=e,this.vars={},this.frames=[]}return e.create=function(t){return n(this,void 0,void 0,(function(){var r,n;return i(this,(function(i){switch(i.label){case 0:return r=new e(t),[4,o.FramePnm.create(r)];case 1:return n=i.sent(),r.frames=[n],[2,r]}}))}))},e}();t.FormatPnm=a},7205:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.FramePnm=void 0;var o=r(601),a=r(1021),s=r(4625),u=r(447),c=r(4485),l=r(5530),f=r(4558),d=r(8810),h=r(4704),p=function(){function e(e,t,r,n,i){this.format=e,this.info=t,this.offset=r,this.maxValue=n,this.rowReader=i,this.type="image"}return e.create=function(t){return n(this,void 0,void 0,(function(){var r=this;return i(this,(function(h){return[2,(0,o.streamLock)(t.stream,(function(o){return n(r,void 0,void 0,(function(){var r,h,p,b,v,y,w,g,m,_,x,P,k,O,R=this;return i(this,(function(S){switch(S.label){case 0:return[4,(r=new a.PnmReader(o)).readString()];case 1:if(h=S.sent(),p=s.pnmDescriptions.find((function(e){return e.sign===h})),!p)throw new u.ErrorRI("Unsupported signature (<s>)",{s:h});return v=f.asciiNumber,[4,r.readString()];case 2:return b=v.apply(void 0,[S.sent(),"width"]),w=f.asciiNumber,[4,r.readString()];case 3:return y=w.apply(void 0,[S.sent(),"height"]),g=1,"graymap"!==p.fmt&&"pixmap"!==p.fmt?[3,5]:(m=f.asciiNumber,[4,r.readString()]);case 4:g=m.apply(void 0,[S.sent(),"max value"]),(0,f.checkInterval)("Max value",g,65535,1),S.label=5;case 5:switch(_="",x="",P=function(){return n(R,void 0,void 0,(function(){return i(this,(function(e){return[2]}))}))},p.fmt){case"bitmap":_="G1",x="pbm",P="plain"===p.type?(0,d.pbmRowReaderPlain)(o):(0,d.pbmRowReaderRaw)(o);break;case"graymap":x="pgm",_=g<256?"G8":"G16",P=(0,d.pnmRowReaderGray)(p.type,o,g);break;case"pixmap":x="ppm",_=g<256?"R8G8B8":"R16G16B16",P=(0,d.pnmRowReaderRgb)(p.type,o,g);break;default:throw new u.ErrorRI("Invalid type [<t>]",{t:p.fmt})}return k={size:new c.Point(b,y),fmt:new l.PixelFormat(_),vars:{mapType:p.fmt,dataType:p.type,ext:x,maxVal:g}},[4,o.getPos()];case 6:return O=S.sent(),[2,new e(t,k,O,g,P)]}}))}))}))]}))}))},e.prototype.read=function(e){var t=this,r=this.format.stream;return(0,o.streamLock)(r,(function(){return n(t,void 0,void 0,(function(){var t,o,a,s,u,c,l=this;return i(this,(function(f){switch(f.label){case 0:return o=(t=this).info,a=t.offset,s=t.rowReader,[4,r.seek(a)];case 1:return f.sent(),u=o.size.x,c=function(e){return n(l,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,s(u,e)];case 1:return t.sent(),[2]}}))}))},[4,(0,h.readImage)(e,o,c)];case 2:return f.sent(),[2]}}))}))}))},e}();t.FramePnm=p},1021:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.PnmReader=void 0;var o=r(601),a=new Set(Array.from(" \t\r\n").map((function(e){return e.charCodeAt(0)}))),s=function(){function e(e){this.stream=e}return e.prototype.skipSpaces=function(){return n(this,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return[4,(0,o.isEndOfStream)(this.stream)];case 1:return t.sent()?[3,5]:[4,(0,o.readByte)(this.stream)];case 2:return e=t.sent(),a.has(e)?[3,4]:[4,this.stream.skip(-1)];case 3:return t.sent(),[3,5];case 4:return[3,0];case 5:return[2]}}))}))},e.prototype.skipComment=function(){return n(this,void 0,void 0,(function(){var e,t;return i(this,(function(r){switch(r.label){case 0:return[4,(0,o.isEndOfStream)(this.stream)];case 1:return r.sent()?[3,3]:[4,(0,o.readByte)(this.stream)];case 2:return e=r.sent(),"\n"===(t=String.fromCharCode(e))||"\r"===t?[3,3]:[3,0];case 3:return[2]}}))}))},e.prototype.readString=function(){return n(this,void 0,void 0,(function(){var e,t,r;return i(this,(function(n){switch(n.label){case 0:return[4,this.skipSpaces()];case 1:n.sent(),e="",n.label=2;case 2:return[4,(0,o.isEndOfStream)(this.stream)];case 3:return n.sent()?[3,9]:[4,(0,o.readByte)(this.stream)];case 4:return t=n.sent(),a.has(t)?[3,9]:"#"!==(r=String.fromCharCode(t))?[3,7]:[4,this.skipComment()];case 5:return n.sent(),[4,this.skipSpaces()];case 6:return n.sent(),[3,8];case 7:e+=r,n.label=8;case 8:return[3,2];case 9:return[2,e]}}))}))},e}();t.PnmReader=s},8810:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.pbmRowReaderRaw=t.pbmRowReaderPlain=t.pnmRowReaderRgb=t.pnmRowReaderRgbRawWord=t.pnmRowReaderRgbRawByte=t.pnmRowReaderRgbPlainWord=t.pnmRowReaderRgbPlainByte=t.pnmRowReaderGray=t.pnmRowReaderGrayRawWord=t.pnmRowReaderGrayRawByte=t.pnmRowReaderGrayPlainWord=t.pnmRowReaderGrayPlainByte=void 0;var o=r(1021),a=r(4558),s=function(e,t,r){return(0,a.checkInterval)("Pixel value",e,t),Math.floor(e*r/t)};t.pnmRowReaderGrayPlainByte=function(e,t){var r=new o.PnmReader(e);return function(e,o){return n(void 0,void 0,void 0,(function(){var n,u,c;return i(this,(function(i){switch(i.label){case 0:n=0,i.label=1;case 1:return n<e?[4,r.readString()]:[3,4];case 2:u=i.sent(),c=(0,a.asciiNumber)(u),o[n]=s(c,t,255),i.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))}},t.pnmRowReaderGrayPlainWord=function(e,t){var r=new o.PnmReader(e);return function(e,o){return n(void 0,void 0,void 0,(function(){var n,u,c,l;return i(this,(function(i){switch(i.label){case 0:n=new Uint16Array(o.buffer,o.byteOffset),u=0,i.label=1;case 1:return u<e?[4,r.readString()]:[3,4];case 2:c=i.sent(),l=(0,a.asciiNumber)(c),n[u]=s(l,t,65535),i.label=3;case 3:return u++,[3,1];case 4:return[2]}}))}))}},t.pnmRowReaderGrayRawByte=function(e,t){return function(r,o){return n(void 0,void 0,void 0,(function(){var n,a;return i(this,(function(i){switch(i.label){case 0:return 255!==t?[3,2]:[4,e.readBuffer(o,r)];case 1:return i.sent(),[3,4];case 2:return[4,e.read(r)];case 3:for(n=i.sent(),a=0;a<r;a++)o[a]=s(n[a],t,255);i.label=4;case 4:return[2]}}))}))}},t.pnmRowReaderGrayRawWord=function(e,t){return function(r,o){return n(void 0,void 0,void 0,(function(){var n,a,u,c,l;return i(this,(function(i){switch(i.label){case 0:return[4,e.read(2*r)];case 1:for(n=i.sent(),a=new DataView(n.buffer,n.byteOffset),u=new Uint16Array(o.buffer,o.byteOffset),c=0;c<r;c++)l=a.getUint16(2*c,!1),u[c]=s(l,t,65535);return[2]}}))}))}},t.pnmRowReaderGray=function(e,r,n){return"plain"===e?n<256?(0,t.pnmRowReaderGrayPlainByte)(r,n):(0,t.pnmRowReaderGrayPlainWord)(r,n):n<256?(0,t.pnmRowReaderGrayRawByte)(r,n):(0,t.pnmRowReaderGrayRawWord)(r,n)},t.pnmRowReaderRgbPlainByte=function(e,t){var r=new o.PnmReader(e);return function(e,o){return n(void 0,void 0,void 0,(function(){var n,u,c,l;return i(this,(function(i){switch(i.label){case 0:n=3*e,u=0,i.label=1;case 1:return u<n?[4,r.readString()]:[3,4];case 2:c=i.sent(),l=(0,a.asciiNumber)(c),o[u]=s(l,t,255),i.label=3;case 3:return u++,[3,1];case 4:return[2]}}))}))}},t.pnmRowReaderRgbPlainWord=function(e,t){var r=new o.PnmReader(e);return function(e,o){return n(void 0,void 0,void 0,(function(){var n,u,c,l,f;return i(this,(function(i){switch(i.label){case 0:n=3*e,u=new Uint16Array(o.buffer,o.byteOffset),c=0,i.label=1;case 1:return c<n?[4,r.readString()]:[3,4];case 2:l=i.sent(),f=(0,a.asciiNumber)(l),u[c]=s(f,t,65535),i.label=3;case 3:return c++,[3,1];case 4:return[2]}}))}))}},t.pnmRowReaderRgbRawByte=function(e,t){return function(r,o){return n(void 0,void 0,void 0,(function(){var n,a;return i(this,(function(i){switch(i.label){case 0:return n=3*r,[4,e.readBuffer(o,n)];case 1:if(i.sent(),255!==t)for(a=0;a<n;a++)o[a]=s(o[a],t,255);return[2]}}))}))}},t.pnmRowReaderRgbRawWord=function(e,t){return function(r,o){return n(void 0,void 0,void 0,(function(){var n,a,u,c,l;return i(this,(function(i){switch(i.label){case 0:return n=3*r,[4,e.read(2*n)];case 1:for(a=i.sent(),u=new DataView(a.buffer,a.byteOffset),c=new Uint16Array(o.buffer,o.byteOffset),l=0;l<n;l++)c[l]=u.getUint16(2*l,!1);if(65535!==t)for(l=0;l<n;l++)c[l]=s(c[l],t,65535);return[2]}}))}))}},t.pnmRowReaderRgb=function(e,r,n){return"plain"===e?n<256?(0,t.pnmRowReaderRgbPlainByte)(r,n):(0,t.pnmRowReaderRgbPlainWord)(r,n):n<256?(0,t.pnmRowReaderRgbRawByte)(r,n):(0,t.pnmRowReaderRgbRawWord)(r,n)},t.pbmRowReaderPlain=function(e){var t=new o.PnmReader(e);return function(e,r){return n(void 0,void 0,void 0,(function(){var n,o,a,s;return i(this,(function(i){switch(i.label){case 0:n=0,o=128,a=0,s=0,i.label=1;case 1:return s<e?[4,t.readString()]:[3,4];case 2:"0"===i.sent()&&(a|=o),(o>>=1)||(o=128,r[n++]=a,a=0),i.label=3;case 3:return s++,[3,1];case 4:return 128!==o&&(r[n]=a),[2]}}))}))}},t.pbmRowReaderRaw=function(e){return function(t,r){return n(void 0,void 0,void 0,(function(){var n,o;return i(this,(function(i){switch(i.label){case 0:return n=t+7>>3,[4,e.readBuffer(r,n)];case 1:for(i.sent(),o=0;o<n;o++)r[o]^=255;return[2]}}))}))}}},4558:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkInterval=t.asciiNumber=void 0;var n=r(447),i=/\d+/;t.asciiNumber=function(e,t){if(void 0===t&&(t="number"),!i.test(e))throw new n.ErrorRI("Invalid ".concat(t,': "<s>"'),{s:e});return+e},t.checkInterval=function(e,t,r,i){if(void 0===i&&(i=0),t>r||t<i)throw new n.ErrorRI("".concat(e," = <value> must be in [<minValue>, <maxValue>]"),{value:t,maxValue:r,minValue:i})}},3637:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.driverPnm=void 0;var o=r(4625),a=r(585);t.driverPnm={name:o.pnmName,shortName:"BMP",extensions:["pnm","pbm","pgm","ppm"],props:new Set,detect:function(e){return n(void 0,void 0,void 0,(function(){var t;return i(this,(function(r){switch(r.label){case 0:return[4,e.getSize()];case 1:return r.sent()<2?[2,!1]:[4,e.seek(0)];case 2:return r.sent(),[4,e.read(2)];case 3:return[2,66===(t=r.sent())[0]&&77===t[1]]}}))}))},createFormat:function(e){return a.FormatPnm.create(e)}}},4625:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pnmDescriptions=t.pnmName=void 0,t.pnmName="Portable anymap format",t.pnmDescriptions=[{sign:"P1",type:"plain",fmt:"bitmap"},{sign:"P2",type:"plain",fmt:"graymap"},{sign:"P3",type:"plain",fmt:"pixmap"},{sign:"P4",type:"raw",fmt:"bitmap"},{sign:"P5",type:"raw",fmt:"graymap"},{sign:"P6",type:"raw",fmt:"pixmap"}]},2780:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(5530),t)},9586:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.delayInterrupter=void 0;var o=r(447);t.delayInterrupter=function(e,t,r){var a=(new Date).getTime();return function(s){return n(void 0,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return(new Date).getTime()-a>e?r?[4,r(s)]:[3,2]:[3,4];case 1:n.sent(),n.label=2;case 2:return[4,(0,o.delay)(t)];case 3:n.sent(),a=(new Date).getTime(),n.label=4;case 4:return[2]}}))}))}}},7133:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(9586),t)},2464:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSurfaceFromDescriptor=void 0;var n=r(8450),i=r(2780),o=r(447);t.createSurfaceFromDescriptor=function(e,t){if("function"==typeof t)return t(e);var r=e.size;if(t instanceof n.Surface){var a=t.size;if(!r.equals(a))throw new o.ErrorRI("Expected size <src>, but got size <dst>",{src:String(r),dst:String(a)});return t}return t instanceof i.PixelFormat?new n.SurfaceStd({size:r,fmt:t}):new n.SurfaceStd(e)}},7848:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(2850),t),i(r(3940),t),i(r(9901),t)},9901:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.loadImageByName=void 0;var o=r(9250),a=r(3940);t.loadImageByName=function(e,t){return n(void 0,void 0,void 0,(function(){var r;return i(this,(function(n){switch(n.label){case 0:return[4,(0,o.createFormatByName)(e)];case 1:return r=n.sent(),[2,(0,a.loadImageFromFormat)(r,t)]}}))}))}},3940:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},o=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};Object.defineProperty(t,"__esModule",{value:!0}),t.loadImageFromFormat=void 0;var a=r(447),s=r(2850);t.loadImageFromFormat=function(e,t){return n(void 0,void 0,void 0,(function(){var r,n,u,c,l,f,d;return i(this,(function(i){if(n=(r=null!=t?t:{}).frameDef,u=void 0===n?0:n,c=o(r,["frameDef"]),l="number"==typeof u?[e.frames[u],"#"]:[e.frames.find((function(e){return e.type===u})),"with type="],d=l[1],!(f=l[0]))throw new a.ErrorRI("Not found frame <msg><fr>",{msg:d,fr:JSON.stringify(u)});return[2,(0,s.loadImageFromFrame)(f,c)]}))}))}},2850:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.loadImageFromFrame=void 0;var o=r(2464),a=r(4704);t.loadImageFromFrame=function(e,t){return n(void 0,void 0,void 0,(function(){var r,n,s,u,c,l,f;return i(this,(function(i){switch(i.label){case 0:return r=e.info,s=(n=null!=t?t:{}).target,u=n.converterSearchProps,c=n.progress,l=(0,o.createSurfaceFromDescriptor)(r,s),f=(0,a.createConverterForRead)(r.fmt,l,{converterSearchProps:u,progress:c}),[4,e.read(f)];case 1:return i.sent(),[2,l]}}))}))}},4485:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Point=t.pointFromDeg=t.pointFromRad=void 0;var n=r(2438),i=r(4772);t.pointFromRad=function(e){return new o(Math.cos(e),Math.sin(e))},t.pointFromDeg=function(e){return(0,t.pointFromRad)((0,i.deg2rad)(e))};var o=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.x=e,this.y=t}return e.prototype.set=function(e,t){this.x=e,this.y=t},e.prototype.setPt=function(e){this.x=e.x,this.y=e.y},e.prototype.toString=function(){return"(".concat((0,n.toa)(this.x),", ").concat((0,n.toa)(this.y),")")},e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.equals=function(e){return(0,n.is0)(this.x-e.x)&&(0,n.is0)(this.y-e.y)},e.prototype.isZero=function(){return(0,n.is0)(this.x)&&(0,n.is0)(this.y)},e.prototype.plus=function(t){return new e(this.x+t.x,this.y+t.y)},e.prototype.add=function(e,t){return this.x+=e,this.y+=t,this},e.prototype.iadd=function(e){return this.x+=e.x,this.y+=e.y,this},e.prototype.isub=function(e){return this.x-=e.x,this.y-=e.y,this},e.prototype.minus=function(t){return new e(this.x-t.x,this.y-t.y)},e.prototype.neg=function(){return new e(-this.x,-this.y)},e.prototype.times=function(t){return new e(t*this.x,t*this.y)},e.prototype.scale=function(e){return this.x*=e,this.y*=e,this},e.prototype.mini=function(e){this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y)},e.prototype.maxi=function(e){this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y)},e.prototype.polarAngle=function(){return(0,n.is0)(this.x)&&(0,n.is0)(this.y)?0:(0,n.is0)(this.x)?this.y>0?Math.PI/2:-Math.PI/2:Math.atan2(this.y,this.x)},e.prototype.polarAngleDeg=function(){return(0,i.rad2deg)(this.polarAngle())},e.prototype.lengthSqr=function(){return this.x*this.x+this.y*this.y},e.prototype.length=function(){return Math.sqrt(this.lengthSqr())},e.prototype.distSqr=function(e){return e.minus(this).lengthSqr()},e.prototype.dist=function(e){return Math.sqrt(this.distSqr(e))},e.prototype.normal=function(){var t=this.length();return(0,n.is0)(t)?new e:this.times(1/t)},e.prototype.transpon=function(t){return t?new e(this.y,-this.x):new e(-this.y,this.x)},Object.defineProperty(e,"zero",{get:function(){return a},enumerable:!1,configurable:!0}),e}();t.Point=o;var a=Object.freeze(new o)},2438:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toa=t.isClose=t.is0=void 0,t.is0=function(e){return Math.abs(e)<.001},t.isClose=function(e,r){return(0,t.is0)(Math.abs(e)-Math.abs(r))},t.toa=function(e){return e.toFixed(2).replace(/0+$/g,"").replace(/\.$/,"").replace(/^-0$/,"0")}},4772:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deg2rad=t.rad2deg=void 0,t.rad2deg=function(e){return 180*e/Math.PI},t.deg2rad=function(e){return e*Math.PI/180}},186:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.BufferStream=void 0;var o=r(1215),a=function(){function e(e,t){var r;this.buffer=e,this.position=0,this.lock=function(){return Promise.resolve()},this.unlock=function(){return Promise.resolve()},this.flush=function(){return Promise.resolve()},this.name=(null==t?void 0:t.name)||"Buffer",this.size=null!==(r=null==t?void 0:t.size)&&void 0!==r?r:e.byteLength}return e.prototype.seek=function(e){return n(this,void 0,void 0,(function(){return i(this,(function(t){return this.position=e,[2]}))}))},e.prototype.skip=function(e){return n(this,void 0,void 0,(function(){return i(this,(function(t){return this.position+=e,[2,this.position]}))}))},e.prototype.getPos=function(){return n(this,void 0,void 0,(function(){return i(this,(function(e){return[2,this.position]}))}))},e.prototype.getSize=function(){return n(this,void 0,void 0,(function(){return i(this,(function(e){return[2,this.size]}))}))},e.prototype.read=function(e){return n(this,void 0,void 0,(function(){var t,r;return i(this,(function(n){return t=this.position+e,r=this.buffer.slice(this.position,t),this.position=t,[2,r]}))}))},e.prototype.readBuffer=function(e,t,r){return n(this,void 0,void 0,(function(){return i(this,(function(n){return(0,o.copyBytes)(t,this.buffer,this.position,e,null!=r?r:0),this.position+=t,[2,t]}))}))},e.prototype.write=function(e,t,r){return n(this,void 0,void 0,(function(){var n;return i(this,(function(i){return n=null!=t?t:e.byteLength,(0,o.copyBytes)(n,e,null!=r?r:0,this.buffer,this.position),this.position+=n,this.size=Math.max(this.size,this.position),[2]}))}))},e}();t.BufferStream=a},4412:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2697:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createFileStream=void 0;var n=r(447),i=r(186);t.createFileStream=function(e){return new Promise((function(t,r){var o=new FileReader;o.onerror=function(){return r(new n.ErrorRI("Can't open file ".concat(e.name)))},o.onload=function(){var n=o.result;n instanceof ArrayBuffer?t(new i.BufferStream(new Uint8Array(n,0),{name:e.name})):r(Error("Invalid result of FileReader"))},o.readAsArrayBuffer(e)}))}},601:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(4412),t),i(r(186),t),i(r(2681),t),i(r(9596),t),i(r(9833),t),i(r(2697),t)},9833:function(e,t){"use strict";var r=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},n=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.isEndOfStream=void 0,t.isEndOfStream=function(e){return r(void 0,void 0,void 0,(function(){var t;return n(this,(function(r){switch(r.label){case 0:return[4,e.getPos()];case 1:return t=r.sent(),[4,e.getSize()];case 2:return[2,t>=r.sent()]}}))}))}},9596:function(e,t){"use strict";var r=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},n=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.readByte=void 0,t.readByte=function(e){return r(void 0,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return[4,e.read(1)];case 1:return[2,t.sent()[0]]}}))}))}},2681:function(e,t){"use strict";var r=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},n=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.streamLock=void 0,t.streamLock=function(e,t){return r(void 0,void 0,void 0,(function(){return n(this,(function(r){switch(r.label){case 0:return r.trys.push([0,,3,4]),[4,e.lock()];case 1:return r.sent(),[4,t(e)];case 2:return[2,r.sent()];case 3:return e.unlock(),[7];case 4:return[2]}}))}))}},4044:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCrossBlob=void 0;var n=r(9169);t.createCrossBlob=function(e){try{if((0,n.isNode)())return new(0,r(4658).Blob)(e)}catch(e){}return new Blob(e)}},8609:function(e,t){"use strict";var r,n=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorRI=void 0;var i=function(e){function t(r,n){var i=e.call(this,t.makeMessage(r,n))||this;return i.msgId=r,i.params=n,i}return n(t,e),t.makeMessage=function(e,t){return e.replace(/<([A-Za-z\d]+)>/g,(function(e,r){var n;return null!==(n=null==t?void 0:t[r])&&void 0!==n?n:r}))},t}(Error);t.ErrorRI=i},3022:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.delay=void 0,t.delay=function(e){return new Promise((function(t){setTimeout(t,e)}))}},6596:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dumpA=t.dumpW=t.dump=void 0,t.dump=function(e,t,r){return Array.from(e.slice(null!=t?t:0,null!=r?r:e.byteLength)).map((function(e){return e.toString(16).toUpperCase().padStart(2,"0")})).join(" ")},t.dumpW=function(e,t,r){return Array.from(e.slice(null!=t?t:0,null!=r?r:e.byteLength)).map((function(e){return e.toString(16).toUpperCase().padStart(4,"0")})).join(" ")},t.dumpA=function(e){return e.map((function(e){return e.toString(16).toUpperCase()})).map((function(e){return 1&e.length?"0".concat(e):e})).join(" ")}},8819:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dumpChunks=void 0;var n=r(6596);t.dumpChunks=function(e,t){var r=[];return t.forEach((function(t,n){n%e==0&&r.push([]),r[r.length-1].push(t)})),r.map((function(e){return(0,n.dumpA)(e)}))}},447:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(8609),t),i(r(6596),t),i(r(8819),t),i(r(7479),t),i(r(3803),t),i(r(3022),t),i(r(9390),t)},9169:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isNode=void 0,t.isNode=function(){var e;try{return"node"===(null===(e=null===process||void 0===process?void 0:process.release)||void 0===e?void 0:e.name)}catch(e){return!1}}},9390:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rangeLimit16=t.rangeLimit=void 0,t.rangeLimit=function(e){return Math.max(Math.min(e,255),0)},t.rangeLimit16=function(e){return Math.max(Math.min(e,65535),0)}},7479:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.subBuffer=void 0,t.subBuffer=function(e,t,r){return new Uint8Array(e.buffer,e.byteOffset+t,r)}},6795:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.textFromBuffer=void 0,t.textFromBuffer=function(e){return Array.from(e).map((function(e){return String.fromCharCode(e)})).join("")}},3803:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.utf8ToBytes=t.bytesToUtf8=void 0;var n,i,o=r(9169);t.bytesToUtf8=function(e){if(!n)if((0,o.isNode)()){var t=r(7283);n=new t.TextDecoder("utf8")}else n=new TextDecoder("utf8");return n.decode(e)},t.utf8ToBytes=function(e){if(!i)if((0,o.isNode)()){var t=r(7283);i=new t.TextEncoder}else i=new TextEncoder;return i.encode(e)}},2845:(e,t,r)=>{"use strict";const{Deflate:n,deflate:i,deflateRaw:o,gzip:a}=r(9880),{Inflate:s,inflate:u,inflateRaw:c,ungzip:l}=r(1380),f=r(1271);e.exports.Deflate=n,e.exports.deflate=i,e.exports.deflateRaw=o,e.exports.gzip=a,e.exports.Inflate=s,e.exports.inflate=u,e.exports.inflateRaw=c,e.exports.ungzip=l,e.exports.constants=f},9880:(e,t,r)=>{"use strict";const n=r(5789),i=r(9761),o=r(7944),a=r(2950),s=r(744),u=Object.prototype.toString,{Z_NO_FLUSH:c,Z_SYNC_FLUSH:l,Z_FULL_FLUSH:f,Z_FINISH:d,Z_OK:h,Z_STREAM_END:p,Z_DEFAULT_COMPRESSION:b,Z_DEFAULT_STRATEGY:v,Z_DEFLATED:y}=r(1271);function w(e){this.options=i.assign({level:b,method:y,chunkSize:16384,windowBits:15,memLevel:8,strategy:v},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;let r=n.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==h)throw new Error(a[r]);if(t.header&&n.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?o.string2buf(t.dictionary):"[object ArrayBuffer]"===u.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,r=n.deflateSetDictionary(this.strm,e),r!==h)throw new Error(a[r]);this._dict_set=!0}}function g(e,t){const r=new w(t);if(r.push(e,!0),r.err)throw r.msg||a[r.err];return r.result}w.prototype.push=function(e,t){const r=this.strm,i=this.options.chunkSize;let a,s;if(this.ended)return!1;for(s=t===~~t?t:!0===t?d:c,"string"==typeof e?r.input=o.string2buf(e):"[object ArrayBuffer]"===u.call(e)?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;)if(0===r.avail_out&&(r.output=new Uint8Array(i),r.next_out=0,r.avail_out=i),(s===l||s===f)&&r.avail_out<=6)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else{if(a=n.deflate(r,s),a===p)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),a=n.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===h;if(0!==r.avail_out){if(s>0&&r.next_out>0)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else if(0===r.avail_in)break}else this.onData(r.output)}return!0},w.prototype.onData=function(e){this.chunks.push(e)},w.prototype.onEnd=function(e){e===h&&(this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},e.exports.Deflate=w,e.exports.deflate=g,e.exports.deflateRaw=function(e,t){return(t=t||{}).raw=!0,g(e,t)},e.exports.gzip=function(e,t){return(t=t||{}).gzip=!0,g(e,t)},e.exports.constants=r(1271)},1380:(e,t,r)=>{"use strict";const n=r(5020),i=r(9761),o=r(7944),a=r(2950),s=r(744),u=r(7357),c=Object.prototype.toString,{Z_NO_FLUSH:l,Z_FINISH:f,Z_OK:d,Z_STREAM_END:h,Z_NEED_DICT:p,Z_STREAM_ERROR:b,Z_DATA_ERROR:v,Z_MEM_ERROR:y}=r(1271);function w(e){this.options=i.assign({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;let r=n.inflateInit2(this.strm,t.windowBits);if(r!==d)throw new Error(a[r]);if(this.header=new u,n.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=o.string2buf(t.dictionary):"[object ArrayBuffer]"===c.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=n.inflateSetDictionary(this.strm,t.dictionary),r!==d)))throw new Error(a[r])}function g(e,t){const r=new w(t);if(r.push(e),r.err)throw r.msg||a[r.err];return r.result}w.prototype.push=function(e,t){const r=this.strm,i=this.options.chunkSize,a=this.options.dictionary;let s,u,w;if(this.ended)return!1;for(u=t===~~t?t:!0===t?f:l,"[object ArrayBuffer]"===c.call(e)?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(0===r.avail_out&&(r.output=new Uint8Array(i),r.next_out=0,r.avail_out=i),s=n.inflate(r,u),s===p&&a&&(s=n.inflateSetDictionary(r,a),s===d?s=n.inflate(r,u):s===v&&(s=p));r.avail_in>0&&s===h&&r.state.wrap>0&&0!==e[r.next_in];)n.inflateReset(r),s=n.inflate(r,u);switch(s){case b:case v:case p:case y:return this.onEnd(s),this.ended=!0,!1}if(w=r.avail_out,r.next_out&&(0===r.avail_out||s===h))if("string"===this.options.to){let e=o.utf8border(r.output,r.next_out),t=r.next_out-e,n=o.buf2string(r.output,e);r.next_out=t,r.avail_out=i-t,t&&r.output.set(r.output.subarray(e,e+t),0),this.onData(n)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(s!==d||0!==w){if(s===h)return s=n.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(0===r.avail_in)break}}return!0},w.prototype.onData=function(e){this.chunks.push(e)},w.prototype.onEnd=function(e){e===d&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},e.exports.Inflate=w,e.exports.inflate=g,e.exports.inflateRaw=function(e,t){return(t=t||{}).raw=!0,g(e,t)},e.exports.ungzip=g,e.exports.constants=r(1271)},9761:e=>{"use strict";const t=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);e.exports.assign=function(e){const r=Array.prototype.slice.call(arguments,1);for(;r.length;){const n=r.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const r in n)t(n,r)&&(e[r]=n[r])}}return e},e.exports.flattenChunks=e=>{let t=0;for(let r=0,n=e.length;r<n;r++)t+=e[r].length;const r=new Uint8Array(t);for(let t=0,n=0,i=e.length;t<i;t++){let i=e[t];r.set(i,n),n+=i.length}return r}},7944:e=>{"use strict";let t=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){t=!1}const r=new Uint8Array(256);for(let e=0;e<256;e++)r[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;r[254]=r[254]=1,e.exports.string2buf=e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,r,n,i,o,a=e.length,s=0;for(i=0;i<a;i++)r=e.charCodeAt(i),55296==(64512&r)&&i+1<a&&(n=e.charCodeAt(i+1),56320==(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),i++)),s+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(s),o=0,i=0;o<s;i++)r=e.charCodeAt(i),55296==(64512&r)&&i+1<a&&(n=e.charCodeAt(i+1),56320==(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?t[o++]=r:r<2048?(t[o++]=192|r>>>6,t[o++]=128|63&r):r<65536?(t[o++]=224|r>>>12,t[o++]=128|r>>>6&63,t[o++]=128|63&r):(t[o++]=240|r>>>18,t[o++]=128|r>>>12&63,t[o++]=128|r>>>6&63,t[o++]=128|63&r);return t},e.exports.buf2string=(e,n)=>{const i=n||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,n));let o,a;const s=new Array(2*i);for(a=0,o=0;o<i;){let t=e[o++];if(t<128){s[a++]=t;continue}let n=r[t];if(n>4)s[a++]=65533,o+=n-1;else{for(t&=2===n?31:3===n?15:7;n>1&&o<i;)t=t<<6|63&e[o++],n--;n>1?s[a++]=65533:t<65536?s[a++]=t:(t-=65536,s[a++]=55296|t>>10&1023,s[a++]=56320|1023&t)}}return((e,r)=>{if(r<65534&&e.subarray&&t)return String.fromCharCode.apply(null,e.length===r?e:e.subarray(0,r));let n="";for(let t=0;t<r;t++)n+=String.fromCharCode(e[t]);return n})(s,a)},e.exports.utf8border=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+r[e[n]]>t?n:t}},5562:e=>{"use strict";e.exports=(e,t,r,n)=>{let i=65535&e|0,o=e>>>16&65535|0,a=0;for(;0!==r;){a=r>2e3?2e3:r,r-=a;do{i=i+t[n++]|0,o=o+i|0}while(--a);i%=65521,o%=65521}return i|o<<16|0}},1271:e=>{"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},4299:e=>{"use strict";const t=new Uint32Array((()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t})());e.exports=(e,r,n,i)=>{const o=t,a=i+n;e^=-1;for(let t=i;t<a;t++)e=e>>>8^o[255&(e^r[t])];return-1^e}},5789:(e,t,r)=>{"use strict";const{_tr_init:n,_tr_stored_block:i,_tr_flush_block:o,_tr_tally:a,_tr_align:s}=r(9564),u=r(5562),c=r(4299),l=r(2950),{Z_NO_FLUSH:f,Z_PARTIAL_FLUSH:d,Z_FULL_FLUSH:h,Z_FINISH:p,Z_BLOCK:b,Z_OK:v,Z_STREAM_END:y,Z_STREAM_ERROR:w,Z_DATA_ERROR:g,Z_BUF_ERROR:m,Z_DEFAULT_COMPRESSION:_,Z_FILTERED:x,Z_HUFFMAN_ONLY:P,Z_RLE:k,Z_FIXED:O,Z_DEFAULT_STRATEGY:R,Z_UNKNOWN:S,Z_DEFLATED:B}=r(1271),I=258,z=262,M=42,j=113,A=666,F=(e,t)=>(e.msg=l[t],t),G=e=>2*e-(e>4?9:0),E=e=>{let t=e.length;for(;--t>=0;)e[t]=0},C=e=>{let t,r,n,i=e.w_size;t=e.hash_size,n=t;do{r=e.head[--n],e.head[n]=r>=i?r-i:0}while(--t);t=i,n=t;do{r=e.prev[--n],e.prev[n]=r>=i?r-i:0}while(--t)};let U=(e,t,r)=>(t<<e.hash_shift^r)&e.hash_mask;const D=e=>{const t=e.state;let r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+r),e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))},T=(e,t)=>{o(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,D(e.strm)},N=(e,t)=>{e.pending_buf[e.pending++]=t},L=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},H=(e,t,r,n)=>{let i=e.avail_in;return i>n&&(i=n),0===i?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),r),1===e.state.wrap?e.adler=u(e.adler,t,i,r):2===e.state.wrap&&(e.adler=c(e.adler,t,i,r)),e.next_in+=i,e.total_in+=i,i)},Z=(e,t)=>{let r,n,i=e.max_chain_length,o=e.strstart,a=e.prev_length,s=e.nice_match;const u=e.strstart>e.w_size-z?e.strstart-(e.w_size-z):0,c=e.window,l=e.w_mask,f=e.prev,d=e.strstart+I;let h=c[o+a-1],p=c[o+a];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(r=t,c[r+a]===p&&c[r+a-1]===h&&c[r]===c[o]&&c[++r]===c[o+1]){o+=2,r++;do{}while(c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&o<d);if(n=I-(d-o),o=d-I,n>a){if(e.match_start=t,a=n,n>=s)break;h=c[o+a-1],p=c[o+a]}}}while((t=f[t&l])>u&&0!=--i);return a<=e.lookahead?a:e.lookahead},V=e=>{const t=e.w_size;let r,n,i;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-z)&&(e.window.set(e.window.subarray(t,t+t-n),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),C(e),n+=t),0===e.strm.avail_in)break;if(r=H(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=r,e.lookahead+e.insert>=3)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=U(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=U(e,e.ins_h,e.window[i+3-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<z&&0!==e.strm.avail_in)},W=(e,t)=>{let r,n,o,a=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,s=0,u=e.strm.avail_in;do{if(r=65535,o=e.bi_valid+42>>3,e.strm.avail_out<o)break;if(o=e.strm.avail_out-o,n=e.strstart-e.block_start,r>n+e.strm.avail_in&&(r=n+e.strm.avail_in),r>o&&(r=o),r<a&&(0===r&&t!==p||t===f||r!==n+e.strm.avail_in))break;s=t===p&&r===n+e.strm.avail_in?1:0,i(e,0,0,s),e.pending_buf[e.pending-4]=r,e.pending_buf[e.pending-3]=r>>8,e.pending_buf[e.pending-2]=~r,e.pending_buf[e.pending-1]=~r>>8,D(e.strm),n&&(n>r&&(n=r),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+n),e.strm.next_out),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n,e.block_start+=n,r-=n),r&&(H(e.strm,e.strm.output,e.strm.next_out,r),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r)}while(0===s);return u-=e.strm.avail_in,u&&(u>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=u&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-u,e.strm.next_in),e.strstart),e.strstart+=u,e.insert+=u>e.w_size-e.insert?e.w_size-e.insert:u),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),s?4:t!==f&&t!==p&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(o=e.window_size-e.strstart,e.strm.avail_in>o&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,o+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),o>e.strm.avail_in&&(o=e.strm.avail_in),o&&(H(e.strm,e.window,e.strstart,o),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.high_water<e.strstart&&(e.high_water=e.strstart),o=e.bi_valid+42>>3,o=e.pending_buf_size-o>65535?65535:e.pending_buf_size-o,a=o>e.w_size?e.w_size:o,n=e.strstart-e.block_start,(n>=a||(n||t===p)&&t!==f&&0===e.strm.avail_in&&n<=o)&&(r=n>o?o:n,s=t===p&&0===e.strm.avail_in&&r===n?1:0,i(e,e.block_start,r,s),e.block_start+=r,D(e.strm)),s?3:1)},q=(e,t)=>{let r,n;for(;;){if(e.lookahead<z){if(V(e),e.lookahead<z&&t===f)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=U(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-z&&(e.match_length=Z(e,r)),e.match_length>=3)if(n=a(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=U(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=U(e,e.ins_h,e.window[e.strstart+1]);else n=a(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(T(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===p?(T(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(T(e,!1),0===e.strm.avail_out)?1:2},X=(e,t)=>{let r,n,i;for(;;){if(e.lookahead<z){if(V(e),e.lookahead<z&&t===f)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=U(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-z&&(e.match_length=Z(e,r),e.match_length<=5&&(e.strategy===x||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,n=a(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=U(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,n&&(T(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(n=a(e,0,e.window[e.strstart-1]),n&&T(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=a(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===p?(T(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(T(e,!1),0===e.strm.avail_out)?1:2};function Y(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}const K=[new Y(0,0,0,0,W),new Y(4,4,8,4,q),new Y(4,5,16,8,q),new Y(4,6,32,32,q),new Y(4,4,16,16,X),new Y(8,16,32,32,X),new Y(8,16,128,128,X),new Y(8,32,128,256,X),new Y(32,128,258,1024,X),new Y(32,258,258,4096,X)];function J(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=B,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),E(this.dyn_ltree),E(this.dyn_dtree),E(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),E(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),E(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Q=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==M&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==j&&t.status!==A?1:0},$=e=>{if(Q(e))return F(e,w);e.total_in=e.total_out=0,e.data_type=S;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?M:j,e.adler=2===t.wrap?0:1,t.last_flush=-2,n(t),v},ee=e=>{const t=$(e);var r;return t===v&&((r=e.state).window_size=2*r.w_size,E(r.head),r.max_lazy_match=K[r.level].max_lazy,r.good_match=K[r.level].good_length,r.nice_match=K[r.level].nice_length,r.max_chain_length=K[r.level].max_chain,r.strstart=0,r.block_start=0,r.lookahead=0,r.insert=0,r.match_length=r.prev_length=2,r.match_available=0,r.ins_h=0),t},te=(e,t,r,n,i,o)=>{if(!e)return w;let a=1;if(t===_&&(t=6),n<0?(a=0,n=-n):n>15&&(a=2,n-=16),i<1||i>9||r!==B||n<8||n>15||t<0||t>9||o<0||o>O||8===n&&1!==a)return F(e,w);8===n&&(n=9);const s=new J;return e.state=s,s.strm=e,s.status=M,s.wrap=a,s.gzhead=null,s.w_bits=n,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new Uint8Array(2*s.w_size),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=3*(s.lit_bufsize-1),s.level=t,s.strategy=o,s.method=r,ee(e)};e.exports.deflateInit=(e,t)=>te(e,t,B,15,8,R),e.exports.deflateInit2=te,e.exports.deflateReset=ee,e.exports.deflateResetKeep=$,e.exports.deflateSetHeader=(e,t)=>Q(e)||2!==e.state.wrap?w:(e.state.gzhead=t,v),e.exports.deflate=(e,t)=>{if(Q(e)||t>b||t<0)return e?F(e,w):w;const r=e.state;if(!e.output||0!==e.avail_in&&!e.input||r.status===A&&t!==p)return F(e,0===e.avail_out?m:w);const n=r.last_flush;if(r.last_flush=t,0!==r.pending){if(D(e),0===e.avail_out)return r.last_flush=-1,v}else if(0===e.avail_in&&G(t)<=G(n)&&t!==p)return F(e,m);if(r.status===A&&0!==e.avail_in)return F(e,m);if(r.status===M&&0===r.wrap&&(r.status=j),r.status===M){let t=B+(r.w_bits-8<<4)<<8,n=-1;if(n=r.strategy>=P||r.level<2?0:r.level<6?1:6===r.level?2:3,t|=n<<6,0!==r.strstart&&(t|=32),t+=31-t%31,L(r,t),0!==r.strstart&&(L(r,e.adler>>>16),L(r,65535&e.adler)),e.adler=1,r.status=j,D(e),0!==r.pending)return r.last_flush=-1,v}if(57===r.status)if(e.adler=0,N(r,31),N(r,139),N(r,8),r.gzhead)N(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),N(r,255&r.gzhead.time),N(r,r.gzhead.time>>8&255),N(r,r.gzhead.time>>16&255),N(r,r.gzhead.time>>24&255),N(r,9===r.level?2:r.strategy>=P||r.level<2?4:0),N(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(N(r,255&r.gzhead.extra.length),N(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=c(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69;else if(N(r,0),N(r,0),N(r,0),N(r,0),N(r,0),N(r,9===r.level?2:r.strategy>=P||r.level<2?4:0),N(r,3),r.status=j,D(e),0!==r.pending)return r.last_flush=-1,v;if(69===r.status){if(r.gzhead.extra){let t=r.pending,n=(65535&r.gzhead.extra.length)-r.gzindex;for(;r.pending+n>r.pending_buf_size;){let i=r.pending_buf_size-r.pending;if(r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+i),r.pending),r.pending=r.pending_buf_size,r.gzhead.hcrc&&r.pending>t&&(e.adler=c(e.adler,r.pending_buf,r.pending-t,t)),r.gzindex+=i,D(e),0!==r.pending)return r.last_flush=-1,v;t=0,n-=i}let i=new Uint8Array(r.gzhead.extra);r.pending_buf.set(i.subarray(r.gzindex,r.gzindex+n),r.pending),r.pending+=n,r.gzhead.hcrc&&r.pending>t&&(e.adler=c(e.adler,r.pending_buf,r.pending-t,t)),r.gzindex=0}r.status=73}if(73===r.status){if(r.gzhead.name){let t,n=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>n&&(e.adler=c(e.adler,r.pending_buf,r.pending-n,n)),D(e),0!==r.pending)return r.last_flush=-1,v;n=0}t=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,N(r,t)}while(0!==t);r.gzhead.hcrc&&r.pending>n&&(e.adler=c(e.adler,r.pending_buf,r.pending-n,n)),r.gzindex=0}r.status=91}if(91===r.status){if(r.gzhead.comment){let t,n=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>n&&(e.adler=c(e.adler,r.pending_buf,r.pending-n,n)),D(e),0!==r.pending)return r.last_flush=-1,v;n=0}t=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,N(r,t)}while(0!==t);r.gzhead.hcrc&&r.pending>n&&(e.adler=c(e.adler,r.pending_buf,r.pending-n,n))}r.status=103}if(103===r.status){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size&&(D(e),0!==r.pending))return r.last_flush=-1,v;N(r,255&e.adler),N(r,e.adler>>8&255),e.adler=0}if(r.status=j,D(e),0!==r.pending)return r.last_flush=-1,v}if(0!==e.avail_in||0!==r.lookahead||t!==f&&r.status!==A){let n=0===r.level?W(r,t):r.strategy===P?((e,t)=>{let r;for(;;){if(0===e.lookahead&&(V(e),0===e.lookahead)){if(t===f)return 1;break}if(e.match_length=0,r=a(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(T(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===p?(T(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(T(e,!1),0===e.strm.avail_out)?1:2})(r,t):r.strategy===k?((e,t)=>{let r,n,i,o;const s=e.window;for(;;){if(e.lookahead<=I){if(V(e),e.lookahead<=I&&t===f)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(i=e.strstart-1,n=s[i],n===s[++i]&&n===s[++i]&&n===s[++i])){o=e.strstart+I;do{}while(n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&i<o);e.match_length=I-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(r=a(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=a(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(T(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===p?(T(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(T(e,!1),0===e.strm.avail_out)?1:2})(r,t):K[r.level].func(r,t);if(3!==n&&4!==n||(r.status=A),1===n||3===n)return 0===e.avail_out&&(r.last_flush=-1),v;if(2===n&&(t===d?s(r):t!==b&&(i(r,0,0,!1),t===h&&(E(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),D(e),0===e.avail_out))return r.last_flush=-1,v}return t!==p?v:r.wrap<=0?y:(2===r.wrap?(N(r,255&e.adler),N(r,e.adler>>8&255),N(r,e.adler>>16&255),N(r,e.adler>>24&255),N(r,255&e.total_in),N(r,e.total_in>>8&255),N(r,e.total_in>>16&255),N(r,e.total_in>>24&255)):(L(r,e.adler>>>16),L(r,65535&e.adler)),D(e),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?v:y)},e.exports.deflateEnd=e=>{if(Q(e))return w;const t=e.state.status;return e.state=null,t===j?F(e,g):v},e.exports.deflateSetDictionary=(e,t)=>{let r=t.length;if(Q(e))return w;const n=e.state,i=n.wrap;if(2===i||1===i&&n.status!==M||n.lookahead)return w;if(1===i&&(e.adler=u(e.adler,t,r,0)),n.wrap=0,r>=n.w_size){0===i&&(E(n.head),n.strstart=0,n.block_start=0,n.insert=0);let e=new Uint8Array(n.w_size);e.set(t.subarray(r-n.w_size,r),0),t=e,r=n.w_size}const o=e.avail_in,a=e.next_in,s=e.input;for(e.avail_in=r,e.next_in=0,e.input=t,V(n);n.lookahead>=3;){let e=n.strstart,t=n.lookahead-2;do{n.ins_h=U(n,n.ins_h,n.window[e+3-1]),n.prev[e&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=e,e++}while(--t);n.strstart=e,n.lookahead=2,V(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=a,e.input=s,e.avail_in=o,n.wrap=i,v},e.exports.deflateInfo="pako deflate (from Nodeca project)"},7357:e=>{"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},4980:e=>{"use strict";const t=16209;e.exports=function(e,r){let n,i,o,a,s,u,c,l,f,d,h,p,b,v,y,w,g,m,_,x,P,k,O,R;const S=e.state;n=e.next_in,O=e.input,i=n+(e.avail_in-5),o=e.next_out,R=e.output,a=o-(r-e.avail_out),s=o+(e.avail_out-257),u=S.dmax,c=S.wsize,l=S.whave,f=S.wnext,d=S.window,h=S.hold,p=S.bits,b=S.lencode,v=S.distcode,y=(1<<S.lenbits)-1,w=(1<<S.distbits)-1;e:do{p<15&&(h+=O[n++]<<p,p+=8,h+=O[n++]<<p,p+=8),g=b[h&y];t:for(;;){if(m=g>>>24,h>>>=m,p-=m,m=g>>>16&255,0===m)R[o++]=65535&g;else{if(!(16&m)){if(0==(64&m)){g=b[(65535&g)+(h&(1<<m)-1)];continue t}if(32&m){S.mode=16191;break e}e.msg="invalid literal/length code",S.mode=t;break e}_=65535&g,m&=15,m&&(p<m&&(h+=O[n++]<<p,p+=8),_+=h&(1<<m)-1,h>>>=m,p-=m),p<15&&(h+=O[n++]<<p,p+=8,h+=O[n++]<<p,p+=8),g=v[h&w];r:for(;;){if(m=g>>>24,h>>>=m,p-=m,m=g>>>16&255,!(16&m)){if(0==(64&m)){g=v[(65535&g)+(h&(1<<m)-1)];continue r}e.msg="invalid distance code",S.mode=t;break e}if(x=65535&g,m&=15,p<m&&(h+=O[n++]<<p,p+=8,p<m&&(h+=O[n++]<<p,p+=8)),x+=h&(1<<m)-1,x>u){e.msg="invalid distance too far back",S.mode=t;break e}if(h>>>=m,p-=m,m=o-a,x>m){if(m=x-m,m>l&&S.sane){e.msg="invalid distance too far back",S.mode=t;break e}if(P=0,k=d,0===f){if(P+=c-m,m<_){_-=m;do{R[o++]=d[P++]}while(--m);P=o-x,k=R}}else if(f<m){if(P+=c+f-m,m-=f,m<_){_-=m;do{R[o++]=d[P++]}while(--m);if(P=0,f<_){m=f,_-=m;do{R[o++]=d[P++]}while(--m);P=o-x,k=R}}}else if(P+=f-m,m<_){_-=m;do{R[o++]=d[P++]}while(--m);P=o-x,k=R}for(;_>2;)R[o++]=k[P++],R[o++]=k[P++],R[o++]=k[P++],_-=3;_&&(R[o++]=k[P++],_>1&&(R[o++]=k[P++]))}else{P=o-x;do{R[o++]=R[P++],R[o++]=R[P++],R[o++]=R[P++],_-=3}while(_>2);_&&(R[o++]=R[P++],_>1&&(R[o++]=R[P++]))}break}}break}}while(n<i&&o<s);_=p>>3,n-=_,p-=_<<3,h&=(1<<p)-1,e.next_in=n,e.next_out=o,e.avail_in=n<i?i-n+5:5-(n-i),e.avail_out=o<s?s-o+257:257-(o-s),S.hold=h,S.bits=p}},5020:(e,t,r)=>{"use strict";const n=r(5562),i=r(4299),o=r(4980),a=r(881),{Z_FINISH:s,Z_BLOCK:u,Z_TREES:c,Z_OK:l,Z_STREAM_END:f,Z_NEED_DICT:d,Z_STREAM_ERROR:h,Z_DATA_ERROR:p,Z_MEM_ERROR:b,Z_BUF_ERROR:v,Z_DEFLATED:y}=r(1271),w=16180,g=16190,m=16191,_=16192,x=16194,P=16199,k=16200,O=16206,R=16209,S=16210,B=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function I(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const z=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<w||t.mode>16211?1:0},M=e=>{if(z(e))return h;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=w,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,l},j=e=>{if(z(e))return h;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,M(e)},A=(e,t)=>{let r;if(z(e))return h;const n=e.state;return t<0?(r=0,t=-t):(r=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?h:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,j(e))},F=(e,t)=>{if(!e)return h;const r=new I;e.state=r,r.strm=e,r.window=null,r.mode=w;const n=A(e,t);return n!==l&&(e.state=null),n};let G,E,C=!0;const U=e=>{if(C){G=new Int32Array(512),E=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(a(1,e.lens,0,288,G,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;a(2,e.lens,0,32,E,0,e.work,{bits:5}),C=!1}e.lencode=G,e.lenbits=9,e.distcode=E,e.distbits=5},D=(e,t,r,n)=>{let i;const o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),n>=o.wsize?(o.window.set(t.subarray(r-o.wsize,r),0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>n&&(i=n),o.window.set(t.subarray(r-n,r-n+i),o.wnext),(n-=i)?(o.window.set(t.subarray(r-n,r),0),o.wnext=n,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0};e.exports.inflateReset=j,e.exports.inflateReset2=A,e.exports.inflateResetKeep=M,e.exports.inflateInit=e=>F(e,15),e.exports.inflateInit2=F,e.exports.inflate=(e,t)=>{let r,I,M,j,A,F,G,E,C,T,N,L,H,Z,V,W,q,X,Y,K,J,Q,$=0;const ee=new Uint8Array(4);let te,re;const ne=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(z(e)||!e.output||!e.input&&0!==e.avail_in)return h;r=e.state,r.mode===m&&(r.mode=_),A=e.next_out,M=e.output,G=e.avail_out,j=e.next_in,I=e.input,F=e.avail_in,E=r.hold,C=r.bits,T=F,N=G,Q=l;e:for(;;)switch(r.mode){case w:if(0===r.wrap){r.mode=_;break}for(;C<16;){if(0===F)break e;F--,E+=I[j++]<<C,C+=8}if(2&r.wrap&&35615===E){0===r.wbits&&(r.wbits=15),r.check=0,ee[0]=255&E,ee[1]=E>>>8&255,r.check=i(r.check,ee,2,0),E=0,C=0,r.mode=16181;break}if(r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&E)<<8)+(E>>8))%31){e.msg="incorrect header check",r.mode=R;break}if((15&E)!==y){e.msg="unknown compression method",r.mode=R;break}if(E>>>=4,C-=4,J=8+(15&E),0===r.wbits&&(r.wbits=J),J>15||J>r.wbits){e.msg="invalid window size",r.mode=R;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=512&E?16189:m,E=0,C=0;break;case 16181:for(;C<16;){if(0===F)break e;F--,E+=I[j++]<<C,C+=8}if(r.flags=E,(255&r.flags)!==y){e.msg="unknown compression method",r.mode=R;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=R;break}r.head&&(r.head.text=E>>8&1),512&r.flags&&4&r.wrap&&(ee[0]=255&E,ee[1]=E>>>8&255,r.check=i(r.check,ee,2,0)),E=0,C=0,r.mode=16182;case 16182:for(;C<32;){if(0===F)break e;F--,E+=I[j++]<<C,C+=8}r.head&&(r.head.time=E),512&r.flags&&4&r.wrap&&(ee[0]=255&E,ee[1]=E>>>8&255,ee[2]=E>>>16&255,ee[3]=E>>>24&255,r.check=i(r.check,ee,4,0)),E=0,C=0,r.mode=16183;case 16183:for(;C<16;){if(0===F)break e;F--,E+=I[j++]<<C,C+=8}r.head&&(r.head.xflags=255&E,r.head.os=E>>8),512&r.flags&&4&r.wrap&&(ee[0]=255&E,ee[1]=E>>>8&255,r.check=i(r.check,ee,2,0)),E=0,C=0,r.mode=16184;case 16184:if(1024&r.flags){for(;C<16;){if(0===F)break e;F--,E+=I[j++]<<C,C+=8}r.length=E,r.head&&(r.head.extra_len=E),512&r.flags&&4&r.wrap&&(ee[0]=255&E,ee[1]=E>>>8&255,r.check=i(r.check,ee,2,0)),E=0,C=0}else r.head&&(r.head.extra=null);r.mode=16185;case 16185:if(1024&r.flags&&(L=r.length,L>F&&(L=F),L&&(r.head&&(J=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(I.subarray(j,j+L),J)),512&r.flags&&4&r.wrap&&(r.check=i(r.check,I,L,j)),F-=L,j+=L,r.length-=L),r.length))break e;r.length=0,r.mode=16186;case 16186:if(2048&r.flags){if(0===F)break e;L=0;do{J=I[j+L++],r.head&&J&&r.length<65536&&(r.head.name+=String.fromCharCode(J))}while(J&&L<F);if(512&r.flags&&4&r.wrap&&(r.check=i(r.check,I,L,j)),F-=L,j+=L,J)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=16187;case 16187:if(4096&r.flags){if(0===F)break e;L=0;do{J=I[j+L++],r.head&&J&&r.length<65536&&(r.head.comment+=String.fromCharCode(J))}while(J&&L<F);if(512&r.flags&&4&r.wrap&&(r.check=i(r.check,I,L,j)),F-=L,j+=L,J)break e}else r.head&&(r.head.comment=null);r.mode=16188;case 16188:if(512&r.flags){for(;C<16;){if(0===F)break e;F--,E+=I[j++]<<C,C+=8}if(4&r.wrap&&E!==(65535&r.check)){e.msg="header crc mismatch",r.mode=R;break}E=0,C=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=m;break;case 16189:for(;C<32;){if(0===F)break e;F--,E+=I[j++]<<C,C+=8}e.adler=r.check=B(E),E=0,C=0,r.mode=g;case g:if(0===r.havedict)return e.next_out=A,e.avail_out=G,e.next_in=j,e.avail_in=F,r.hold=E,r.bits=C,d;e.adler=r.check=1,r.mode=m;case m:if(t===u||t===c)break e;case _:if(r.last){E>>>=7&C,C-=7&C,r.mode=O;break}for(;C<3;){if(0===F)break e;F--,E+=I[j++]<<C,C+=8}switch(r.last=1&E,E>>>=1,C-=1,3&E){case 0:r.mode=16193;break;case 1:if(U(r),r.mode=P,t===c){E>>>=2,C-=2;break e}break;case 2:r.mode=16196;break;case 3:e.msg="invalid block type",r.mode=R}E>>>=2,C-=2;break;case 16193:for(E>>>=7&C,C-=7&C;C<32;){if(0===F)break e;F--,E+=I[j++]<<C,C+=8}if((65535&E)!=(E>>>16^65535)){e.msg="invalid stored block lengths",r.mode=R;break}if(r.length=65535&E,E=0,C=0,r.mode=x,t===c)break e;case x:r.mode=16195;case 16195:if(L=r.length,L){if(L>F&&(L=F),L>G&&(L=G),0===L)break e;M.set(I.subarray(j,j+L),A),F-=L,j+=L,G-=L,A+=L,r.length-=L;break}r.mode=m;break;case 16196:for(;C<14;){if(0===F)break e;F--,E+=I[j++]<<C,C+=8}if(r.nlen=257+(31&E),E>>>=5,C-=5,r.ndist=1+(31&E),E>>>=5,C-=5,r.ncode=4+(15&E),E>>>=4,C-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=R;break}r.have=0,r.mode=16197;case 16197:for(;r.have<r.ncode;){for(;C<3;){if(0===F)break e;F--,E+=I[j++]<<C,C+=8}r.lens[ne[r.have++]]=7&E,E>>>=3,C-=3}for(;r.have<19;)r.lens[ne[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,te={bits:r.lenbits},Q=a(0,r.lens,0,19,r.lencode,0,r.work,te),r.lenbits=te.bits,Q){e.msg="invalid code lengths set",r.mode=R;break}r.have=0,r.mode=16198;case 16198:for(;r.have<r.nlen+r.ndist;){for(;$=r.lencode[E&(1<<r.lenbits)-1],V=$>>>24,W=$>>>16&255,q=65535&$,!(V<=C);){if(0===F)break e;F--,E+=I[j++]<<C,C+=8}if(q<16)E>>>=V,C-=V,r.lens[r.have++]=q;else{if(16===q){for(re=V+2;C<re;){if(0===F)break e;F--,E+=I[j++]<<C,C+=8}if(E>>>=V,C-=V,0===r.have){e.msg="invalid bit length repeat",r.mode=R;break}J=r.lens[r.have-1],L=3+(3&E),E>>>=2,C-=2}else if(17===q){for(re=V+3;C<re;){if(0===F)break e;F--,E+=I[j++]<<C,C+=8}E>>>=V,C-=V,J=0,L=3+(7&E),E>>>=3,C-=3}else{for(re=V+7;C<re;){if(0===F)break e;F--,E+=I[j++]<<C,C+=8}E>>>=V,C-=V,J=0,L=11+(127&E),E>>>=7,C-=7}if(r.have+L>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=R;break}for(;L--;)r.lens[r.have++]=J}}if(r.mode===R)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=R;break}if(r.lenbits=9,te={bits:r.lenbits},Q=a(1,r.lens,0,r.nlen,r.lencode,0,r.work,te),r.lenbits=te.bits,Q){e.msg="invalid literal/lengths set",r.mode=R;break}if(r.distbits=6,r.distcode=r.distdyn,te={bits:r.distbits},Q=a(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,te),r.distbits=te.bits,Q){e.msg="invalid distances set",r.mode=R;break}if(r.mode=P,t===c)break e;case P:r.mode=k;case k:if(F>=6&&G>=258){e.next_out=A,e.avail_out=G,e.next_in=j,e.avail_in=F,r.hold=E,r.bits=C,o(e,N),A=e.next_out,M=e.output,G=e.avail_out,j=e.next_in,I=e.input,F=e.avail_in,E=r.hold,C=r.bits,r.mode===m&&(r.back=-1);break}for(r.back=0;$=r.lencode[E&(1<<r.lenbits)-1],V=$>>>24,W=$>>>16&255,q=65535&$,!(V<=C);){if(0===F)break e;F--,E+=I[j++]<<C,C+=8}if(W&&0==(240&W)){for(X=V,Y=W,K=q;$=r.lencode[K+((E&(1<<X+Y)-1)>>X)],V=$>>>24,W=$>>>16&255,q=65535&$,!(X+V<=C);){if(0===F)break e;F--,E+=I[j++]<<C,C+=8}E>>>=X,C-=X,r.back+=X}if(E>>>=V,C-=V,r.back+=V,r.length=q,0===W){r.mode=16205;break}if(32&W){r.back=-1,r.mode=m;break}if(64&W){e.msg="invalid literal/length code",r.mode=R;break}r.extra=15&W,r.mode=16201;case 16201:if(r.extra){for(re=r.extra;C<re;){if(0===F)break e;F--,E+=I[j++]<<C,C+=8}r.length+=E&(1<<r.extra)-1,E>>>=r.extra,C-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=16202;case 16202:for(;$=r.distcode[E&(1<<r.distbits)-1],V=$>>>24,W=$>>>16&255,q=65535&$,!(V<=C);){if(0===F)break e;F--,E+=I[j++]<<C,C+=8}if(0==(240&W)){for(X=V,Y=W,K=q;$=r.distcode[K+((E&(1<<X+Y)-1)>>X)],V=$>>>24,W=$>>>16&255,q=65535&$,!(X+V<=C);){if(0===F)break e;F--,E+=I[j++]<<C,C+=8}E>>>=X,C-=X,r.back+=X}if(E>>>=V,C-=V,r.back+=V,64&W){e.msg="invalid distance code",r.mode=R;break}r.offset=q,r.extra=15&W,r.mode=16203;case 16203:if(r.extra){for(re=r.extra;C<re;){if(0===F)break e;F--,E+=I[j++]<<C,C+=8}r.offset+=E&(1<<r.extra)-1,E>>>=r.extra,C-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=R;break}r.mode=16204;case 16204:if(0===G)break e;if(L=N-G,r.offset>L){if(L=r.offset-L,L>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=R;break}L>r.wnext?(L-=r.wnext,H=r.wsize-L):H=r.wnext-L,L>r.length&&(L=r.length),Z=r.window}else Z=M,H=A-r.offset,L=r.length;L>G&&(L=G),G-=L,r.length-=L;do{M[A++]=Z[H++]}while(--L);0===r.length&&(r.mode=k);break;case 16205:if(0===G)break e;M[A++]=r.length,G--,r.mode=k;break;case O:if(r.wrap){for(;C<32;){if(0===F)break e;F--,E|=I[j++]<<C,C+=8}if(N-=G,e.total_out+=N,r.total+=N,4&r.wrap&&N&&(e.adler=r.check=r.flags?i(r.check,M,N,A-N):n(r.check,M,N,A-N)),N=G,4&r.wrap&&(r.flags?E:B(E))!==r.check){e.msg="incorrect data check",r.mode=R;break}E=0,C=0}r.mode=16207;case 16207:if(r.wrap&&r.flags){for(;C<32;){if(0===F)break e;F--,E+=I[j++]<<C,C+=8}if(4&r.wrap&&E!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=R;break}E=0,C=0}r.mode=16208;case 16208:Q=f;break e;case R:Q=p;break e;case S:return b;default:return h}return e.next_out=A,e.avail_out=G,e.next_in=j,e.avail_in=F,r.hold=E,r.bits=C,(r.wsize||N!==e.avail_out&&r.mode<R&&(r.mode<O||t!==s))&&D(e,e.output,e.next_out,N-e.avail_out)?(r.mode=S,b):(T-=e.avail_in,N-=e.avail_out,e.total_in+=T,e.total_out+=N,r.total+=N,4&r.wrap&&N&&(e.adler=r.check=r.flags?i(r.check,M,N,e.next_out-N):n(r.check,M,N,e.next_out-N)),e.data_type=r.bits+(r.last?64:0)+(r.mode===m?128:0)+(r.mode===P||r.mode===x?256:0),(0===T&&0===N||t===s)&&Q===l&&(Q=v),Q)},e.exports.inflateEnd=e=>{if(z(e))return h;let t=e.state;return t.window&&(t.window=null),e.state=null,l},e.exports.inflateGetHeader=(e,t)=>{if(z(e))return h;const r=e.state;return 0==(2&r.wrap)?h:(r.head=t,t.done=!1,l)},e.exports.inflateSetDictionary=(e,t)=>{const r=t.length;let i,o,a;return z(e)?h:(i=e.state,0!==i.wrap&&i.mode!==g?h:i.mode===g&&(o=1,o=n(o,t,r,0),o!==i.check)?p:(a=D(e,t,r,r),a?(i.mode=S,b):(i.havedict=1,l)))},e.exports.inflateInfo="pako inflate (from Nodeca project)"},881:e=>{"use strict";const t=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),r=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),n=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),i=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);e.exports=(e,o,a,s,u,c,l,f)=>{const d=f.bits;let h,p,b,v,y,w,g=0,m=0,_=0,x=0,P=0,k=0,O=0,R=0,S=0,B=0,I=null;const z=new Uint16Array(16),M=new Uint16Array(16);let j,A,F,G=null;for(g=0;g<=15;g++)z[g]=0;for(m=0;m<s;m++)z[o[a+m]]++;for(P=d,x=15;x>=1&&0===z[x];x--);if(P>x&&(P=x),0===x)return u[c++]=20971520,u[c++]=20971520,f.bits=1,0;for(_=1;_<x&&0===z[_];_++);for(P<_&&(P=_),R=1,g=1;g<=15;g++)if(R<<=1,R-=z[g],R<0)return-1;if(R>0&&(0===e||1!==x))return-1;for(M[1]=0,g=1;g<15;g++)M[g+1]=M[g]+z[g];for(m=0;m<s;m++)0!==o[a+m]&&(l[M[o[a+m]]++]=m);if(0===e?(I=G=l,w=20):1===e?(I=t,G=r,w=257):(I=n,G=i,w=0),B=0,m=0,g=_,y=c,k=P,O=0,b=-1,S=1<<P,v=S-1,1===e&&S>852||2===e&&S>592)return 1;for(;;){j=g-O,l[m]+1<w?(A=0,F=l[m]):l[m]>=w?(A=G[l[m]-w],F=I[l[m]-w]):(A=96,F=0),h=1<<g-O,p=1<<k,_=p;do{p-=h,u[y+(B>>O)+p]=j<<24|A<<16|F|0}while(0!==p);for(h=1<<g-1;B&h;)h>>=1;if(0!==h?(B&=h-1,B+=h):B=0,m++,0==--z[g]){if(g===x)break;g=o[a+l[m]]}if(g>P&&(B&v)!==b){for(0===O&&(O=P),y+=_,k=g-O,R=1<<k;k+O<x&&(R-=z[k+O],!(R<=0));)k++,R<<=1;if(S+=1<<k,1===e&&S>852||2===e&&S>592)return 1;b=B&v,u[b]=P<<24|k<<16|y-c|0}}return 0!==B&&(u[y+B]=g-O<<24|64<<16|0),f.bits=P,0}},2950:e=>{"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},9564:e=>{"use strict";function t(e){let t=e.length;for(;--t>=0;)e[t]=0}const r=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),n=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),i=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),o=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=new Array(576);t(a);const s=new Array(60);t(s);const u=new Array(512);t(u);const c=new Array(256);t(c);const l=new Array(29);t(l);const f=new Array(30);function d(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}let h,p,b;function v(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}t(f);const y=e=>e<256?u[e]:u[256+(e>>>7)],w=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},g=(e,t,r)=>{e.bi_valid>16-r?(e.bi_buf|=t<<e.bi_valid&65535,w(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=r-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)},m=(e,t,r)=>{g(e,r[2*t],r[2*t+1])},_=(e,t)=>{let r=0;do{r|=1&e,e>>>=1,r<<=1}while(--t>0);return r>>>1},x=(e,t,r)=>{const n=new Array(16);let i,o,a=0;for(i=1;i<=15;i++)a=a+r[i-1]<<1,n[i]=a;for(o=0;o<=t;o++){let t=e[2*o+1];0!==t&&(e[2*o]=_(n[t]++,t))}},P=e=>{let t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},k=e=>{e.bi_valid>8?w(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},O=(e,t,r,n)=>{const i=2*t,o=2*r;return e[i]<e[o]||e[i]===e[o]&&n[t]<=n[r]},R=(e,t,r)=>{const n=e.heap[r];let i=r<<1;for(;i<=e.heap_len&&(i<e.heap_len&&O(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!O(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n},S=(e,t,i)=>{let o,a,s,u,d=0;if(0!==e.sym_next)do{o=255&e.pending_buf[e.sym_buf+d++],o+=(255&e.pending_buf[e.sym_buf+d++])<<8,a=e.pending_buf[e.sym_buf+d++],0===o?m(e,a,t):(s=c[a],m(e,s+256+1,t),u=r[s],0!==u&&(a-=l[s],g(e,a,u)),o--,s=y(o),m(e,s,i),u=n[s],0!==u&&(o-=f[s],g(e,o,u)))}while(d<e.sym_next);m(e,256,t)},B=(e,t)=>{const r=t.dyn_tree,n=t.stat_desc.static_tree,i=t.stat_desc.has_stree,o=t.stat_desc.elems;let a,s,u,c=-1;for(e.heap_len=0,e.heap_max=573,a=0;a<o;a++)0!==r[2*a]?(e.heap[++e.heap_len]=c=a,e.depth[a]=0):r[2*a+1]=0;for(;e.heap_len<2;)u=e.heap[++e.heap_len]=c<2?++c:0,r[2*u]=1,e.depth[u]=0,e.opt_len--,i&&(e.static_len-=n[2*u+1]);for(t.max_code=c,a=e.heap_len>>1;a>=1;a--)R(e,r,a);u=o;do{a=e.heap[1],e.heap[1]=e.heap[e.heap_len--],R(e,r,1),s=e.heap[1],e.heap[--e.heap_max]=a,e.heap[--e.heap_max]=s,r[2*u]=r[2*a]+r[2*s],e.depth[u]=(e.depth[a]>=e.depth[s]?e.depth[a]:e.depth[s])+1,r[2*a+1]=r[2*s+1]=u,e.heap[1]=u++,R(e,r,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const r=t.dyn_tree,n=t.max_code,i=t.stat_desc.static_tree,o=t.stat_desc.has_stree,a=t.stat_desc.extra_bits,s=t.stat_desc.extra_base,u=t.stat_desc.max_length;let c,l,f,d,h,p,b=0;for(d=0;d<=15;d++)e.bl_count[d]=0;for(r[2*e.heap[e.heap_max]+1]=0,c=e.heap_max+1;c<573;c++)l=e.heap[c],d=r[2*r[2*l+1]+1]+1,d>u&&(d=u,b++),r[2*l+1]=d,l>n||(e.bl_count[d]++,h=0,l>=s&&(h=a[l-s]),p=r[2*l],e.opt_len+=p*(d+h),o&&(e.static_len+=p*(i[2*l+1]+h)));if(0!==b){do{for(d=u-1;0===e.bl_count[d];)d--;e.bl_count[d]--,e.bl_count[d+1]+=2,e.bl_count[u]--,b-=2}while(b>0);for(d=u;0!==d;d--)for(l=e.bl_count[d];0!==l;)f=e.heap[--c],f>n||(r[2*f+1]!==d&&(e.opt_len+=(d-r[2*f+1])*r[2*f],r[2*f+1]=d),l--)}})(e,t),x(r,c,e.bl_count)},I=(e,t,r)=>{let n,i,o=-1,a=t[1],s=0,u=7,c=4;for(0===a&&(u=138,c=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)i=a,a=t[2*(n+1)+1],++s<u&&i===a||(s<c?e.bl_tree[2*i]+=s:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=0,o=i,0===a?(u=138,c=3):i===a?(u=6,c=3):(u=7,c=4))},z=(e,t,r)=>{let n,i,o=-1,a=t[1],s=0,u=7,c=4;for(0===a&&(u=138,c=3),n=0;n<=r;n++)if(i=a,a=t[2*(n+1)+1],!(++s<u&&i===a)){if(s<c)do{m(e,i,e.bl_tree)}while(0!=--s);else 0!==i?(i!==o&&(m(e,i,e.bl_tree),s--),m(e,16,e.bl_tree),g(e,s-3,2)):s<=10?(m(e,17,e.bl_tree),g(e,s-3,3)):(m(e,18,e.bl_tree),g(e,s-11,7));s=0,o=i,0===a?(u=138,c=3):i===a?(u=6,c=3):(u=7,c=4)}};let M=!1;const j=(e,t,r,n)=>{g(e,0+(n?1:0),3),k(e),w(e,r),w(e,~r),r&&e.pending_buf.set(e.window.subarray(t,t+r),e.pending),e.pending+=r};e.exports._tr_init=e=>{M||((()=>{let e,t,o,v,y;const w=new Array(16);for(o=0,v=0;v<28;v++)for(l[v]=o,e=0;e<1<<r[v];e++)c[o++]=v;for(c[o-1]=v,y=0,v=0;v<16;v++)for(f[v]=y,e=0;e<1<<n[v];e++)u[y++]=v;for(y>>=7;v<30;v++)for(f[v]=y<<7,e=0;e<1<<n[v]-7;e++)u[256+y++]=v;for(t=0;t<=15;t++)w[t]=0;for(e=0;e<=143;)a[2*e+1]=8,e++,w[8]++;for(;e<=255;)a[2*e+1]=9,e++,w[9]++;for(;e<=279;)a[2*e+1]=7,e++,w[7]++;for(;e<=287;)a[2*e+1]=8,e++,w[8]++;for(x(a,287,w),e=0;e<30;e++)s[2*e+1]=5,s[2*e]=_(e,5);h=new d(a,r,257,286,15),p=new d(s,n,0,30,15),b=new d(new Array(0),i,0,19,7)})(),M=!0),e.l_desc=new v(e.dyn_ltree,h),e.d_desc=new v(e.dyn_dtree,p),e.bl_desc=new v(e.bl_tree,b),e.bi_buf=0,e.bi_valid=0,P(e)},e.exports._tr_stored_block=j,e.exports._tr_flush_block=(e,t,r,n)=>{let i,u,c=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),B(e,e.l_desc),B(e,e.d_desc),c=(e=>{let t;for(I(e,e.dyn_ltree,e.l_desc.max_code),I(e,e.dyn_dtree,e.d_desc.max_code),B(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*o[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),i=e.opt_len+3+7>>>3,u=e.static_len+3+7>>>3,u<=i&&(i=u)):i=u=r+5,r+4<=i&&-1!==t?j(e,t,r,n):4===e.strategy||u===i?(g(e,2+(n?1:0),3),S(e,a,s)):(g(e,4+(n?1:0),3),((e,t,r,n)=>{let i;for(g(e,t-257,5),g(e,r-1,5),g(e,n-4,4),i=0;i<n;i++)g(e,e.bl_tree[2*o[i]+1],3);z(e,e.dyn_ltree,t-1),z(e,e.dyn_dtree,r-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,c+1),S(e,e.dyn_ltree,e.dyn_dtree)),P(e),n&&k(e)},e.exports._tr_tally=(e,t,r)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=r,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(c[r]+256+1)]++,e.dyn_dtree[2*y(t)]++),e.sym_next===e.sym_end),e.exports._tr_align=e=>{g(e,2,3),m(e,256,a),(e=>{16===e.bi_valid?(w(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}},744:e=>{"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},4658:()=>{},7283:()=>{}},t={};!function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}(5939)})();
//# sourceMappingURL=workerLoad.js.map